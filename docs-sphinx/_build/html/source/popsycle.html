<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>popsycle package &mdash; PopSyCLE 2.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=92fd9be5" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=51b770b3"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="popsycle_docs" href="popsycle_docs.html" />
    <link rel="prev" title="popsycle" href="modules.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            PopSyCLE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">popsycle</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">popsycle package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subpackages">Subpackages</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-popsycle.binary_utils">popsycle.binary_utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.binary_utils.add_magnitudes"><code class="docutils literal notranslate"><span class="pre">add_magnitudes()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.binary_utils.event_table_companion_idxs_to_lists"><code class="docutils literal notranslate"><span class="pre">event_table_companion_idxs_to_lists()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.binary_utils.primary_mag_from_system_mag"><code class="docutils literal notranslate"><span class="pre">primary_mag_from_system_mag()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.binary_utils.primary_mag_from_system_mag_Table"><code class="docutils literal notranslate"><span class="pre">primary_mag_from_system_mag_Table()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.binary_utils.primary_mag_from_system_mag_hdf5"><code class="docutils literal notranslate"><span class="pre">primary_mag_from_system_mag_hdf5()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.binary_utils.subtract_magnitudes"><code class="docutils literal notranslate"><span class="pre">subtract_magnitudes()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-popsycle.conftest">popsycle.conftest module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.conftest.pytest_configure"><code class="docutils literal notranslate"><span class="pre">pytest_configure()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-popsycle.converter">popsycle.converter module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.converter.convert_h5_array_dtype_to_compound_dtype"><code class="docutils literal notranslate"><span class="pre">convert_h5_array_dtype_to_compound_dtype()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-popsycle.ebf">popsycle.ebf module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.EbfFile"><code class="docutils literal notranslate"><span class="pre">EbfFile</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.cat"><code class="docutils literal notranslate"><span class="pre">cat()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.check"><code class="docutils literal notranslate"><span class="pre">check()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.clearEbfMap"><code class="docutils literal notranslate"><span class="pre">clearEbfMap()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.containsKey"><code class="docutils literal notranslate"><span class="pre">containsKey()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.copy"><code class="docutils literal notranslate"><span class="pre">copy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.descr2sdef"><code class="docutils literal notranslate"><span class="pre">descr2sdef()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.dict2npstruct"><code class="docutils literal notranslate"><span class="pre">dict2npstruct()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.diff"><code class="docutils literal notranslate"><span class="pre">diff()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.getHeader"><code class="docutils literal notranslate"><span class="pre">getHeader()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.info"><code class="docutils literal notranslate"><span class="pre">info()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.iterate"><code class="docutils literal notranslate"><span class="pre">iterate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.join"><code class="docutils literal notranslate"><span class="pre">join()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.keys"><code class="docutils literal notranslate"><span class="pre">keys()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.npstruct2dict"><code class="docutils literal notranslate"><span class="pre">npstruct2dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.read_ind"><code class="docutils literal notranslate"><span class="pre">read_ind()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.rename"><code class="docutils literal notranslate"><span class="pre">rename()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.sdef2descr"><code class="docutils literal notranslate"><span class="pre">sdef2descr()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.stat"><code class="docutils literal notranslate"><span class="pre">stat()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.swapEndian"><code class="docutils literal notranslate"><span class="pre">swapEndian()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.unit"><code class="docutils literal notranslate"><span class="pre">unit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.update_ind"><code class="docutils literal notranslate"><span class="pre">update_ind()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.ebf.write"><code class="docutils literal notranslate"><span class="pre">write()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-popsycle.filters">popsycle.filters module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.filters.generate_ubv_to_ztf_grid"><code class="docutils literal notranslate"><span class="pre">generate_ubv_to_ztf_grid()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.filters.load_ubv_to_ztf_grid"><code class="docutils literal notranslate"><span class="pre">load_ubv_to_ztf_grid()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.filters.transform_ubv_to_ztf"><code class="docutils literal notranslate"><span class="pre">transform_ubv_to_ztf()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.filters.ztf_mag_AB_to_vega"><code class="docutils literal notranslate"><span class="pre">ztf_mag_AB_to_vega()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.filters.ztf_mag_vega_to_AB"><code class="docutils literal notranslate"><span class="pre">ztf_mag_vega_to_AB()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-popsycle.orbits">popsycle.orbits module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.orbits.EccAnomalyError"><code class="docutils literal notranslate"><span class="pre">EccAnomalyError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.orbits.Orbit"><code class="docutils literal notranslate"><span class="pre">Orbit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.orbits.a_to_P"><code class="docutils literal notranslate"><span class="pre">a_to_P()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.orbits.add_mult_positions"><code class="docutils literal notranslate"><span class="pre">add_mult_positions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.orbits.add_positions"><code class="docutils literal notranslate"><span class="pre">add_positions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.orbits.distance_to_center_of_mass"><code class="docutils literal notranslate"><span class="pre">distance_to_center_of_mass()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.orbits.plot_companion_orbit"><code class="docutils literal notranslate"><span class="pre">plot_companion_orbit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.orbits.plot_projected_cluster"><code class="docutils literal notranslate"><span class="pre">plot_projected_cluster()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-popsycle.run">popsycle.run module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.run.generate_config_file"><code class="docutils literal notranslate"><span class="pre">generate_config_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.run.generate_field_config_file"><code class="docutils literal notranslate"><span class="pre">generate_field_config_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.run.generate_popsycle_config_file"><code class="docutils literal notranslate"><span class="pre">generate_popsycle_config_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.run.generate_slurm_config_file"><code class="docutils literal notranslate"><span class="pre">generate_slurm_config_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.run.generate_slurm_script"><code class="docutils literal notranslate"><span class="pre">generate_slurm_script()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.run.load_config_file"><code class="docutils literal notranslate"><span class="pre">load_config_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.run.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.run.run"><code class="docutils literal notranslate"><span class="pre">run()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.run.tar_run_results"><code class="docutils literal notranslate"><span class="pre">tar_run_results()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-popsycle.synthetic">popsycle.synthetic module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.bsbl_model_gen"><code class="docutils literal notranslate"><span class="pre">bsbl_model_gen()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.bspl_model_gen"><code class="docutils literal notranslate"><span class="pre">bspl_model_gen()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_DM"><code class="docutils literal notranslate"><span class="pre">calc_DM()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_app_mag"><code class="docutils literal notranslate"><span class="pre">calc_app_mag()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_blend_and_centroid"><code class="docutils literal notranslate"><span class="pre">calc_blend_and_centroid()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_bump_amp"><code class="docutils literal notranslate"><span class="pre">calc_bump_amp()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_closest_approach"><code class="docutils literal notranslate"><span class="pre">calc_closest_approach()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_delta_c"><code class="docutils literal notranslate"><span class="pre">calc_delta_c()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_diff_limit_blend"><code class="docutils literal notranslate"><span class="pre">calc_diff_limit_blend()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_distance"><code class="docutils literal notranslate"><span class="pre">calc_distance()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_events"><code class="docutils literal notranslate"><span class="pre">calc_events()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_ext"><code class="docutils literal notranslate"><span class="pre">calc_ext()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_magnification"><code class="docutils literal notranslate"><span class="pre">calc_magnification()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calc_sph_motion"><code class="docutils literal notranslate"><span class="pre">calc_sph_motion()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.calculate_binary_angles"><code class="docutils literal notranslate"><span class="pre">calculate_binary_angles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.einstein_radius"><code class="docutils literal notranslate"><span class="pre">einstein_radius()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.galactic_to_heliocentric"><code class="docutils literal notranslate"><span class="pre">galactic_to_heliocentric()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.get_Alambda_AKs"><code class="docutils literal notranslate"><span class="pre">get_Alambda_AKs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.get_bsbl_lightcurve_parameters"><code class="docutils literal notranslate"><span class="pre">get_bsbl_lightcurve_parameters()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.get_bspl_lightcurve_parameters"><code class="docutils literal notranslate"><span class="pre">get_bspl_lightcurve_parameters()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.get_psbl_lightcurve_parameters"><code class="docutils literal notranslate"><span class="pre">get_psbl_lightcurve_parameters()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.heliocentric_to_galactic"><code class="docutils literal notranslate"><span class="pre">heliocentric_to_galactic()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.lightcurve_parameter_gen"><code class="docutils literal notranslate"><span class="pre">lightcurve_parameter_gen()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.make_ebf_log"><code class="docutils literal notranslate"><span class="pre">make_ebf_log()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.make_label_file"><code class="docutils literal notranslate"><span class="pre">make_label_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.make_label_file_no_bins"><code class="docutils literal notranslate"><span class="pre">make_label_file_no_bins()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.match_companions"><code class="docutils literal notranslate"><span class="pre">match_companions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.model_param_dict2fits_header"><code class="docutils literal notranslate"><span class="pre">model_param_dict2fits_header()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.one_lightcurve_analysis"><code class="docutils literal notranslate"><span class="pre">one_lightcurve_analysis()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.perform_pop_syn"><code class="docutils literal notranslate"><span class="pre">perform_pop_syn()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.psbl_model_gen"><code class="docutils literal notranslate"><span class="pre">psbl_model_gen()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.reduce_blend_rad"><code class="docutils literal notranslate"><span class="pre">reduce_blend_rad()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.refine_binary_events"><code class="docutils literal notranslate"><span class="pre">refine_binary_events()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.refine_events"><code class="docutils literal notranslate"><span class="pre">refine_events()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.run_galaxia"><code class="docutils literal notranslate"><span class="pre">run_galaxia()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.unique_blends"><code class="docutils literal notranslate"><span class="pre">unique_blends()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.unique_events"><code class="docutils literal notranslate"><span class="pre">unique_events()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.synthetic.write_galaxia_params"><code class="docutils literal notranslate"><span class="pre">write_galaxia_params()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-popsycle.utils">popsycle.utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.add_precision64"><code class="docutils literal notranslate"><span class="pre">add_precision64()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.calc_centroid_shift"><code class="docutils literal notranslate"><span class="pre">calc_centroid_shift()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.calc_delta_c_LL"><code class="docutils literal notranslate"><span class="pre">calc_delta_c_LL()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.calc_f"><code class="docutils literal notranslate"><span class="pre">calc_f()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.calc_new_position"><code class="docutils literal notranslate"><span class="pre">calc_new_position()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.calc_normalized_counts"><code class="docutils literal notranslate"><span class="pre">calc_normalized_counts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.combine_refined_events"><code class="docutils literal notranslate"><span class="pre">combine_refined_events()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.execute"><code class="docutils literal notranslate"><span class="pre">execute()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.generate_isochrones"><code class="docutils literal notranslate"><span class="pre">generate_isochrones()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.get_t_from_u"><code class="docutils literal notranslate"><span class="pre">get_t_from_u()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.get_u_from_t"><code class="docutils literal notranslate"><span class="pre">get_u_from_t()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.make_symlinks"><code class="docutils literal notranslate"><span class="pre">make_symlinks()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.max_delta_c"><code class="docutils literal notranslate"><span class="pre">max_delta_c()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.remove_nan_companions"><code class="docutils literal notranslate"><span class="pre">remove_nan_companions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.return_nearest_gridpoint"><code class="docutils literal notranslate"><span class="pre">return_nearest_gridpoint()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#popsycle.utils.sample_spherical"><code class="docutils literal notranslate"><span class="pre">sample_spherical()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="popsycle_docs.html">popsycle_docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PopSyCLE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">popsycle</a></li>
      <li class="breadcrumb-item active">popsycle package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/source/popsycle.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="popsycle-package">
<h1>popsycle package<a class="headerlink" href="#popsycle-package" title="Link to this heading"></a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Link to this heading"></a></h2>
<div class="toctree-wrapper compound">
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-popsycle.binary_utils">
<span id="popsycle-binary-utils-module"></span><h2>popsycle.binary_utils module<a class="headerlink" href="#module-popsycle.binary_utils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="popsycle.binary_utils.add_magnitudes">
<span class="sig-prename descclassname"><span class="pre">popsycle.binary_utils.</span></span><span class="sig-name descname"><span class="pre">add_magnitudes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mags</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.binary_utils.add_magnitudes" title="Link to this definition"></a></dt>
<dd><p>Adds a list of magnitudes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mags</strong> (<em>array-like</em>) – List or array of magnitudes</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>m_sum</strong> – Sum of input magnitudes</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.binary_utils.event_table_companion_idxs_to_lists">
<span class="sig-prename descclassname"><span class="pre">popsycle.binary_utils.</span></span><span class="sig-name descname"><span class="pre">event_table_companion_idxs_to_lists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.binary_utils.event_table_companion_idxs_to_lists" title="Link to this definition"></a></dt>
<dd><p>The event table from refine_binary_events() is saved with
‘companion_idx_list’ as strs so it can be saved as a .fits file.
This function switches that column to lists.
(Note this changes in place, so input table is changed).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>events</strong> (<em>Astropy Table</em>) – Event table from refine_binary_events with ‘companion_idx_list’ as strs</p></li>
<li><p><strong>Outputs</strong> – </p></li>
<li><p><strong>--------</strong> – </p></li>
<li><p><strong>events</strong> – Event table with ‘companion_idx_list’ as lists</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.binary_utils.primary_mag_from_system_mag">
<span class="sig-prename descclassname"><span class="pre">popsycle.binary_utils.</span></span><span class="sig-name descname"><span class="pre">primary_mag_from_system_mag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">system_mag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companion_mag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.binary_utils.primary_mag_from_system_mag" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.binary_utils.primary_mag_from_system_mag_Table">
<span class="sig-prename descclassname"><span class="pre">popsycle.binary_utils.</span></span><span class="sig-name descname"><span class="pre">primary_mag_from_system_mag_Table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prim_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companions_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_colnames</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.binary_utils.primary_mag_from_system_mag_Table" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.binary_utils.primary_mag_from_system_mag_hdf5">
<span class="sig-prename descclassname"><span class="pre">popsycle.binary_utils.</span></span><span class="sig-name descname"><span class="pre">primary_mag_from_system_mag_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prim_hdf5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_hdf5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_colnames</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.binary_utils.primary_mag_from_system_mag_hdf5" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.binary_utils.subtract_magnitudes">
<span class="sig-prename descclassname"><span class="pre">popsycle.binary_utils.</span></span><span class="sig-name descname"><span class="pre">subtract_magnitudes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.binary_utils.subtract_magnitudes" title="Link to this definition"></a></dt>
<dd><p>Subtracts two magnitudes
Expects m1 to be brighter than m2.
Will return nan if the opposite is the case
or if m1 is nan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>m1</strong> (<em>float</em><em> or </em><em>array-like</em>) – Brighter magnitude</p></li>
<li><p><strong>m2</strong> (<em>float</em><em> or </em><em>array-like</em>) – Dimmer magnitude</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>m_diff</strong> – Difference in the corresponding flux of
m1 - m2</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or array-like</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-popsycle.conftest">
<span id="popsycle-conftest-module"></span><h2>popsycle.conftest module<a class="headerlink" href="#module-popsycle.conftest" title="Link to this heading"></a></h2>
<p>Configure Test Suite.</p>
<p>This file is used to configure the behavior of pytest when using the Astropy
test infrastructure. It needs to live inside the package in order for it to
get picked up when running the tests inside an interpreter using
<cite>{{ cookiecutter.module_name }}.test()</cite>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="popsycle.conftest.pytest_configure">
<span class="sig-prename descclassname"><span class="pre">popsycle.conftest.</span></span><span class="sig-name descname"><span class="pre">pytest_configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.conftest.pytest_configure" title="Link to this definition"></a></dt>
<dd><p>Configure Pytest with Astropy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<em>pytest configuration</em>) – </p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-popsycle.converter">
<span id="popsycle-converter-module"></span><h2>popsycle.converter module<a class="headerlink" href="#module-popsycle.converter" title="Link to this heading"></a></h2>
<p>converter.py
Functions for converting PopSyCLE data formats.</p>
<dl class="py function">
<dt class="sig sig-object py" id="popsycle.converter.convert_h5_array_dtype_to_compound_dtype">
<span class="sig-prename descclassname"><span class="pre">popsycle.converter.</span></span><span class="sig-name descname"><span class="pre">convert_h5_array_dtype_to_compound_dtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hdf5_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.converter.convert_h5_array_dtype_to_compound_dtype" title="Link to this definition"></a></dt>
<dd><p>Converts h5 files with the array datatype into the compound datatype</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hdf5_file</strong> (<em>str</em>) – Name of the HDF5 file with the array datatype.</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>&lt;hdf5_file&gt;.compound_dtype.fits</strong> – Name of the resulting HDF5 file with the compound datatype.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-popsycle.ebf">
<span id="popsycle-ebf-module"></span><h2>popsycle.ebf module<a class="headerlink" href="#module-popsycle.ebf" title="Link to this heading"></a></h2>
<p>A module to read and write data in ebf format.</p>
<blockquote>
<div></div></blockquote>
<p>EBF is a binary format for storing data. It is designed to
read and write data, easily and efficiently.</p>
<ul class="simple">
<li><p>Store multiple data items in one file, each having a unique tag name</p>
<ul>
<li><p>tagnames follow the convention of unix style pathname e.g. /x or /mydata/x</p></li>
<li><p>this allows hierarchical storage of data</p></li>
</ul>
</li>
<li><p>Automatic type and endian conversion</p></li>
<li><p>Support for mutiple programming languages</p>
<ul>
<li><p>data can easily read in C, C++, Fortran, Java, IDL and Matlab</p></li>
<li><p>facilitates easy distribution of data</p></li>
</ul>
</li>
<li><p>Comprehensive numpy support</p>
<ul>
<li><p>data is read back as numpy arrays</p></li>
<li><p>almost any numpy array can be written</p></li>
<li><p>Nested numpy structures are also supported</p></li>
</ul>
</li>
<li><p>Read and write directly a recursive dictionary of numpy arrays</p></li>
</ul>
<p>To install</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$pip install ebfpy           OR
$pip install ebfpy --user    OR
</pre></div>
</div>
<p>Alternatively</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$tar -zxvf ebfpy_x.x.x.tar.gz
$cd ebfpy_x.x.x
$python setup.py install --user                            OR
$python setup.py install --user --install-scripts=mypath   OR
$python setup.py install  --install-scripts=mypath
</pre></div>
</div>
<p>The –install_scripts option if specified
determines the installation location of the command line script ebftkpy,
the ebf module is always installed in a standard location.
It is better to set this manually (to something like ‘/usr/local/bin’
or somewhere in home) because the standard script installation location might
not be in your search path. With <em>–user</em> option generally the scripts are
installed in <em>~/.local/bin/</em>.</p>
<p>To run the test suite just do (from within folder ebfpy_x.x.x)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$./ebf.py
</pre></div>
</div>
<p>Example:</p>
<p>Write specific numpy arrays.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ebf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/x&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/y&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Write in a different path within an ebf file .</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/mypath/x&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/mypath/y&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Read back the written arrays</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span> <span class="o">=</span> <span class="n">ebf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y1</span> <span class="o">=</span> <span class="n">ebf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/mypath/y&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Read all items in an ebf path as a dictionary
such that data[“x”] is same as x1
such that data[“y”] is same as y1</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">ebf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/mypath/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Check the contents of the file.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">)</span>
<span class="go">check.ebf 2460 bytes</span>
<span class="go">------------------------------------------------------------------</span>
<span class="go">name                           dtype    endian  unit       dim</span>
<span class="go">------------------------------------------------------------------</span>
<span class="go">/.ebf/info                     int64    little             [5]</span>
<span class="go">/.ebf/htable                   int8     little             [1256]</span>
<span class="go">/x                             float64  little             [2 5]</span>
<span class="go">/y                             float64  little             [2 5]</span>
<span class="go">/mypath/x                      float64  little             [2 5]</span>
<span class="go">/mypath/y                      float64  little             [2 5]</span>
</pre></div>
</div>
<p>Split a structure and write individual data items in
path “/mypath/” in an ebf file.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dth</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">([(</span><span class="s1">&#39;data_u1&#39;</span><span class="p">,</span> <span class="s1">&#39;u1&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)),</span> <span class="p">(</span><span class="s1">&#39;data_u2&#39;</span><span class="p">,</span> <span class="s1">&#39;u2&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="n">dth</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/mypath/&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data1</span> <span class="o">=</span> <span class="n">ebf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/mypath/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">)</span>
<span class="go">check.ebf 1906 bytes</span>
<span class="go">------------------------------------------------------------------</span>
<span class="go">name                           dtype    endian  unit       dim</span>
<span class="go">------------------------------------------------------------------</span>
<span class="go">/.ebf/info                     int64    little             [5]</span>
<span class="go">/.ebf/htable                   int8     little             [1256]</span>
<span class="go">/mypath/data_u1                uint8    little             [2 5]</span>
<span class="go">/mypath/data_u2                uint16   little             [2 5]</span>
</pre></div>
</div>
<p>Write a nested structure and read it back.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dth</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">([(</span><span class="s1">&#39;data_u1&#39;</span><span class="p">,</span> <span class="s1">&#39;u1&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)),</span> <span class="p">(</span><span class="s1">&#39;data_u2&#39;</span><span class="p">,</span> <span class="s1">&#39;u2&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dth1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">([(</span><span class="s1">&#39;data_u1&#39;</span><span class="p">,</span> <span class="s1">&#39;u1&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)),</span> <span class="p">(</span><span class="s1">&#39;point1&#39;</span><span class="p">,</span> <span class="n">dth</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="n">dth1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;check.ebf&quot;</span><span class="p">,</span> <span class="s2">&quot;/data&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data1</span> <span class="o">=</span> <span class="n">ebf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;check.ebf&quot;</span><span class="p">,</span> <span class="s2">&quot;/data&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;check.ebf&quot;</span><span class="p">)</span>
<span class="go">check.ebf 2247 bytes</span>
<span class="go">------------------------------------------------------------------</span>
<span class="go">name                           dtype    endian  unit       dim</span>
<span class="go">------------------------------------------------------------------</span>
<span class="go">/.ebf/info                     int64    little             [5]</span>
<span class="go">/.ebf/htable                   int8     little             [1256]</span>
<span class="go">/data                          struct   little             [10]</span>
<span class="go">structure definition:</span>
<span class="go">ver-1</span>
<span class="go">struct {</span>
<span class="go">uint8 data_u1 2  2  5  ;</span>
<span class="go">struct {</span>
<span class="go">uint8 data_u1 2  2  5  ;</span>
<span class="go">uint16 data_u2 2  2  5  ;</span>
<span class="go">} point1 1 1   ;</span>
<span class="go">} anonymous 1 1   ;</span>
</pre></div>
</div>
<p>Write a string and read it back as string.
Note, return type is numpy.ndarray, hence have to use tostring()
method to convert it back to string.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;abcdefghijkl&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;check.ebf&quot;</span><span class="p">,</span> <span class="s2">&quot;/mystr&quot;</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">ebf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;check.ebf&quot;</span><span class="p">,</span> <span class="s2">&quot;/mystr&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tostring</span><span class="p">()</span>
</pre></div>
</div>
<p>Write a list of string and read it back as numpy.ndarray of type numpy.string</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;abcdef&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;check.ebf&quot;</span><span class="p">,</span> <span class="s2">&quot;/mystr&quot;</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">ebf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;check.ebf&quot;</span><span class="p">,</span> <span class="s2">&quot;/mystr&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;abc&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;abcdef&quot;</span>
<span class="go">True True</span>
</pre></div>
</div>
<p>Write with units and read it back.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s2">&quot;int32&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/data&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span><span class="n">dataunit</span><span class="o">=</span><span class="s2">&quot;100 m/s&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">,</span> <span class="n">ebf</span><span class="o">.</span><span class="n">unit</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/data&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Check if a data item is present.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">containsKey</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span> <span class="s1">&#39;/data&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="popsycle.ebf.EbfFile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">EbfFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataunit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.EbfFile" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="popsycle.ebf.EbfFile.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.EbfFile.close" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="popsycle.ebf.EbfFile.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.EbfFile.read" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="popsycle.ebf.EbfFile.read_ind">
<span class="sig-name descname"><span class="pre">read_ind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.EbfFile.read_ind" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="popsycle.ebf.EbfFile.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.EbfFile.write" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.cat">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">cat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tagname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tableon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.cat" title="Link to this definition"></a></dt>
<dd><p>print data items in ascii format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – </p></li>
<li><p><strong>tagname</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Kwargs:</dt><dd><p>delimiter(str) - ‘ ‘ or ‘, ‘ for csv</p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x /y&#39;</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x+&#39;</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x+&#39;</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.check">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.check" title="Link to this definition"></a></dt>
<dd><p>check if the file is not corrupted</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – </p>
</dd>
</dl>
<p>Kwargs:</p>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.clearEbfMap">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">clearEbfMap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.clearEbfMap" title="Link to this definition"></a></dt>
<dd><p>Clears cached information about all files. This
could be used to conserve memory after a lot of different files have been
read.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">clearEbfMap</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.containsKey">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">containsKey</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.containsKey" title="Link to this definition"></a></dt>
<dd><p>Check if a data item is present in an ebf  file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – a string specifying filename</p></li>
<li><p><strong>dataname</strong> – name of data item</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>1 if an item is present else 0</p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">containsKey</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.copy">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'a'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tagnames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.copy" title="Link to this definition"></a></dt>
<dd><p>copy data items from one file to another</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename1</strong> (<em>str</em>) – </p></li>
<li><p><strong>filename2</strong> (<em>str</em>) – </p></li>
<li><p><strong>mode</strong> (<em>str</em>) – ‘w’ or ‘a’</p></li>
<li><p><strong>tagnames</strong> (<em>str</em>) – if blank then copies all items or else one can </p></li>
<li><p><strong>string</strong> (<em>supply space separated list</em><em> of </em><em>data items as a single</em>) – </p></li>
<li><p><strong>outpath</strong> (<em>str</em>) – Path ending with ‘/’ into which to copy items</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;check1.ebf&quot;</span><span class="p">,</span><span class="s1">&#39;check2.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x /y&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;check1.ebf&quot;</span><span class="p">,</span><span class="s1">&#39;check2.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;check1.ebf&quot;</span><span class="p">,</span><span class="s1">&#39;check2.ebf&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.descr2sdef">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">descr2sdef</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">descr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.descr2sdef" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.dict2npstruct">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">dict2npstruct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basekey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keylist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.dict2npstruct" title="Link to this definition"></a></dt>
<dd><p>Convert a python dict containing numpy arrays to numpy struct</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – </p></li>
<li><p><strong>basekey</strong> (<em>str</em>) – Only those items in dict whose size match that of data[bsekey] will</p></li>
<li><p><strong>used.</strong> (<em>be</em>) – </p></li>
<li><p><strong>keylist</strong> (<em>str</em>) – list of keys to beused when constructing npstruct</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.diff">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.diff" title="Link to this definition"></a></dt>
<dd><p>Perform diff operation on two files. Ignores data items starting with “/.” which are
for internal use. If file contents are same it does not print anything.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename1</strong> (<em>str</em>) – </p></li>
<li><p><strong>filename2</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="s2">&quot;check1.ebf&quot;</span><span class="p">,</span><span class="s2">&quot;check2.ebf&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.getHeader">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">getHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.getHeader" title="Link to this definition"></a></dt>
<dd><blockquote>
<div><p>Get header of the data item</p>
<dl>
<dt>Args:</dt><dd><p>filename(str):</p>
<p>dataname(str):</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>str.</p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">getHeader</span><span class="p">(</span><span class="s2">&quot;check.ebf&quot;</span><span class="p">,</span><span class="s2">&quot;/x&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.info">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">option</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.info" title="Link to this definition"></a></dt>
<dd><p>Get summary of the contents of a file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – </p>
</dd>
</dl>
<p>Kwargs:</p>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.initialize">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize a file for writing with mode=’w’.
After this one can use mode=’a’ to write rest of the items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – </p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x&#39;</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/y&#39;</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">is same as</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x&#39;</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/y&#39;</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.iterate">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">iterate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tagname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.iterate" title="Link to this definition"></a></dt>
<dd><p>An iterator to read in data, part by part of a given size.
Useful for reading big arrays which are difficult to fit in RAM.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – </p></li>
<li><p><strong>tagname</strong> (<em>str</em>) – the name of data to be read.</p></li>
<li><p><strong>sign</strong> (<em>Multiple items</em><em> of </em><em>same size can be read by appending a +</em>) – </p></li>
<li><p><strong>cache</strong> (<em>int</em>) – no of data items to read at a time</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">temp</span><span class="o">=</span><span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ebf</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x&#39;</span><span class="p">,</span><span class="mi">1000</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">temp</span><span class="o">=</span><span class="n">temp</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>To read all items whose size match with size of “/x”</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">temp</span><span class="o">=</span><span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ebf</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x+&#39;</span><span class="p">,</span><span class="mi">1000</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">temp</span><span class="o">=</span><span class="n">temp</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;/x&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.join">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.join" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.keys">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.keys" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.npstruct2dict">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">npstruct2dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.npstruct2dict" title="Link to this definition"></a></dt>
<dd><p>Convert an array of numpy struct to a python dict of numpy arrays</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.read">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ckon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.read" title="Link to this definition"></a></dt>
<dd><p>Read data from an ebf file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – </p></li>
<li><p><strong>path</strong> (<em>str</em>) – tagname of data to be read from the ebf file          or a path to the data items within the file. If ending with +         then all arrays in the same path having same size as the</p></li>
<li><p><strong>where</strong> (<em>specfied array are read. Useful to load tables</em>) – </p></li>
<li><p><strong>separately.</strong> (<em>individual columns are written</em>) – </p></li>
<li><p><strong>recon</strong> (<em>integer</em>) – Should be 1 if one wants to load data          objects recursively. Should be 0 if one wants to load          data objects only under current path.Defualt is 0.</p></li>
<li><p><strong>ckon</strong> – option that determines if checksum is to be compared with          checksum on file. Default is to compare, but if there is          little possibility of file being externally modified then it can</p></li>
<li><p><strong>0.</strong> (<em>be set to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray or a dictionary of numpy.ndarray. If multiple          data items are to be read as a dictionary, the path must end          with ‘/’ in the later case.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.read_ind">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">read_ind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tagname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.read_ind" title="Link to this definition"></a></dt>
<dd><p>read data from specified locations in a file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – </p></li>
<li><p><strong>tagname</strong> (<em>str</em>) – the name of data to be read</p></li>
<li><p><strong>ind</strong> (<em>str</em>) – list or array of indices to be read</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.rename">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oldkey</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newkey</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.rename" title="Link to this definition"></a></dt>
<dd><p>Rename a data item in an ebf file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – string</p></li>
<li><p><strong>oldkey</strong> – a string, the name of key to rename</p></li>
<li><p><strong>newkey</strong> – a string, the new name. If new key is blank ‘’, then  a         name of the form ‘/.tr’+oldkey+’.X’ is created. Here X is a an </p></li>
<li><p><strong>zero</strong> (<em>integer greater than equal to</em>) – </p></li>
</ul>
</dd>
</dl>
<p>:param which is incremented each :
:param time the item with same name is deleted.:</p>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x1&#39;</span><span class="p">,</span><span class="s1">&#39;/x2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x1&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.sdef2descr">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">sdef2descr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sdef</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.sdef2descr" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.stat">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">stat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tagname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.stat" title="Link to this definition"></a></dt>
<dd><p>Get statistics of a data item</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – </p></li>
<li><p><strong>tagname</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
</dl>
<p>Kwargs:</p>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="s1">&#39;check.ebf&#39;</span><span class="p">,</span><span class="s1">&#39;/x /y &#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.swapEndian">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">swapEndian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.swapEndian" title="Link to this definition"></a></dt>
<dd><p>Swaps the endianess of the file. Little to Big or Big to Little</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – </p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">swapEndian</span><span class="p">(</span><span class="s2">&quot;check.ebf&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.unit">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.unit" title="Link to this definition"></a></dt>
<dd><blockquote>
<div><p>Get physical units of the data type if supplied in file or else empty string</p>
<dl>
<dt>Args:</dt><dd><p>filename(str):</p>
<p>dataname(str):</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>str.</p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ebf</span><span class="o">.</span><span class="n">unit</span><span class="p">(</span><span class="s2">&quot;check.ebf&quot;</span><span class="p">,</span><span class="s2">&quot;/x&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.update_ind">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">update_ind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.update_ind" title="Link to this definition"></a></dt>
<dd><p>Update existing data array in a file at user given index positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – </p></li>
<li><p><strong>dataname</strong> (<em>str</em>) – the name of data to be upated</p></li>
<li><p><strong>data</strong> – data to be updated</p></li>
<li><p><strong>ind</strong> – indices of the array on file that</p></li>
<li><p><strong>updated.</strong> (<em>needs to be</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.ebf.write">
<span class="sig-prename descclassname"><span class="pre">popsycle.ebf.</span></span><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tagname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataunit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.ebf.write" title="Link to this definition"></a></dt>
<dd><p>Write data to a file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – </p></li>
<li><p><strong>tagname</strong> (<em>str</em>) – the name of data to be written to the ebf file or         a path ending with ‘/’ if multiple items are to be written</p></li>
<li><p><strong>data</strong> (<em>numpy.ndarray</em>) – data to be to be written</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – writing mode, “w” to write a fresh file or “a”         to append an existing file</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Kwargs:</dt><dd><p>dataunit(str): units of data default is a blank string</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-popsycle.filters">
<span id="popsycle-filters-module"></span><h2>popsycle.filters module<a class="headerlink" href="#module-popsycle.filters" title="Link to this heading"></a></h2>
<p>filters.py
Functions (and their associated functions) for additional photometric systems.</p>
<dl class="py function">
<dt class="sig sig-object py" id="popsycle.filters.generate_ubv_to_ztf_grid">
<span class="sig-prename descclassname"><span class="pre">popsycle.filters.</span></span><span class="sig-name descname"><span class="pre">generate_ubv_to_ztf_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iso_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.filters.generate_ubv_to_ztf_grid" title="Link to this definition"></a></dt>
<dd><p>Creates the 2D transformational matrix <a href="#id1"><span class="problematic" id="id2">`</span></a>ubv_to_ztf-r_grid.npz’ and
<a href="#id3"><span class="problematic" id="id4">`</span></a>ubv_to_ztf-g_grid.npz’ necessary for generating ztf-g and ztf-r
magnitudes from the UBV filters.</p>
<dl class="simple">
<dt>2D transformational matrix is valid for values of:</dt><dd><p>0 &lt; ubv_V - ubv_R &lt; 6
0 &lt; ubv_B - ubv_V &lt; 6</p>
</dd>
<dt>ubv-to-ztf-g</dt><dd><p>x-axis : ubv_V - ubv_R
y-axis : ubv_B - ubv_V
z-axis : ztf_g - ubv_V</p>
</dd>
<dt>ubv-to-ztf-r</dt><dd><p>x-axis : ubv_V - ubv_R
y-axis : ubv_B - ubv_V
z-axis : ztf_r - ubv_R</p>
</dd>
<dt>ubv-to-ztf-i</dt><dd><p>x-axis : ubv_V - ubv_R
y-axis : ubv_B - ubv_V
z-axis : ztf_i - ubv_I</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iso_dir</strong> (<em>filepath</em>) – Where are the isochrones stored (for SPISEA)</p></li>
<li><p><strong>filter_name</strong> (<em>str</em>) – The name of the filter in which to calculate all the
microlensing events. Must be either ‘g’ or ‘r’.</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>None</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.filters.load_ubv_to_ztf_grid">
<span class="sig-prename descclassname"><span class="pre">popsycle.filters.</span></span><span class="sig-name descname"><span class="pre">load_ubv_to_ztf_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.filters.load_ubv_to_ztf_grid" title="Link to this definition"></a></dt>
<dd><p>Loads the 2D transformational matrix <a href="#id5"><span class="problematic" id="id6">`</span></a>ubv_to_ztf-r_grid.npz’ and
<a href="#id7"><span class="problematic" id="id8">`</span></a>ubv_to_ztf-g_grid.npz’ necessary for generating ztf-g and ztf-r
magnitudes from the UBV filters, as well as the kdtree of those values.</p>
<dl class="simple">
<dt>2D transformational matrix is valid for values of:</dt><dd><p>0 &lt; ubv_V - ubv_R &lt; 6
0 &lt; ubv_B - ubv_V &lt; 6</p>
</dd>
<dt>ubv-to-ztf-g</dt><dd><p>x-axis : ubv_V - ubv_R
y-axis : ubv_B - ubv_V
z-axis : ztf_g - ubv_V</p>
</dd>
<dt>ubv-to-ztf-r</dt><dd><p>x-axis : ubv_V - ubv_R
y-axis : ubv_B - ubv_V
z-axis : ztf_r - ubv_R</p>
</dd>
<dt>ubv-to-ztf-i</dt><dd><p>x-axis : ubv_V - ubv_R
y-axis : ubv_B - ubv_V
z-axis : ztf_i - ubv_I</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter_name</strong> (<em>str</em>) – The name of the filter in which to calculate all the
microlensing events. Must be either ‘g’ or ‘r’ or ‘i’.</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>ubv_to_ztf_grid</strong> (<em>2D numpy array</em>) – 2D grid array of UBV colors with each cell containing the difference
between a ztf filter and a ubv filter</p></li>
<li><p><strong>kdtree</strong> (<em>cKDTree</em>) – kdtree containing the grid of colors on the x-axis and y-axis</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.filters.transform_ubv_to_ztf">
<span class="sig-prename descclassname"><span class="pre">popsycle.filters.</span></span><span class="sig-name descname"><span class="pre">transform_ubv_to_ztf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ubv_B</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ubv_V</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ubv_R</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ubv_I</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.filters.transform_ubv_to_ztf" title="Link to this definition"></a></dt>
<dd><p>Converts ubv filters into ztf filters.</p>
<dl class="simple">
<dt>Function is valid for values of:</dt><dd><p>0 &lt; ubv_V - ubv_R &lt; 6
0 &lt; ubv_B - ubv_V &lt; 6</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter_name</strong> (<em>str</em>) – ZTF filter name of converted photometry
Can be ‘g’, ‘r’, or ‘i’
If converting to ztf_i, then ubv_I must be provided</p></li>
<li><p><strong>ubv_B</strong> (<em>array</em><em> of </em><em>floats</em>) – ubv_B photometry of galaxia / SPISEA sources</p></li>
<li><p><strong>ubv_V</strong> (<em>array</em><em> of </em><em>floats</em>) – ubv_V photometry of galaxia / SPISEA sources</p></li>
<li><p><strong>ubv_R</strong> (<em>array</em><em> of </em><em>floats</em>) – ubv_R photometry of galaxia / SPISEA sources</p></li>
<li><p><strong>Parameters</strong> (<em>Optional</em>) – </p></li>
<li><p><strong>-------------------</strong> – </p></li>
<li><p><strong>ubv_I</strong> (<em>array</em><em> of </em><em>floats</em>) – ubv_I photometry of galaxia / SPISEA sources,
required for converting to ztf_i</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>ztf_mag</strong> (<em>array</em><em> of </em><em>floats</em>) – ztf photometry of galaxia / SPISEA sources in <cite>filter_name</cite></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.filters.ztf_mag_AB_to_vega">
<span class="sig-prename descclassname"><span class="pre">popsycle.filters.</span></span><span class="sig-name descname"><span class="pre">ztf_mag_AB_to_vega</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ztf_mag_AB</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.filters.ztf_mag_AB_to_vega" title="Link to this definition"></a></dt>
<dd><p>Converts AB magnitudes into vega magnitudes for ztf filters.
Extrapolated from <a class="reference external" href="http://astroweb.case.edu/ssm/ASTR620/alternateabsmag.html">http://astroweb.case.edu/ssm/ASTR620/alternateabsmag.html</a>
using the effective wavelengths from
<a class="reference external" href="http://svo2.cab.inta-csic.es/svo/theory/fps3/">http://svo2.cab.inta-csic.es/svo/theory/fps3/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ztf_mag_AB</strong> (<em>float</em><em>, </em><em>array</em><em> of </em><em>floats</em>) – ztf photometry of galaxia / SPISEA sources in AB system</p></li>
<li><p><strong>filter_name</strong> (<em>str</em>) – The name of the filter in which to calculate all the
microlensing events. Must be either ‘g’ or ‘r’ or ‘i’.</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>ztf_mag_vega</strong> (<em>float</em><em>, </em><em>array</em><em> of </em><em>floats</em>) – ztf photometry of galaxia / SPISEA sources in vega system</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.filters.ztf_mag_vega_to_AB">
<span class="sig-prename descclassname"><span class="pre">popsycle.filters.</span></span><span class="sig-name descname"><span class="pre">ztf_mag_vega_to_AB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ztf_mag_vega</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.filters.ztf_mag_vega_to_AB" title="Link to this definition"></a></dt>
<dd><p>Converts vega magnitudes into AB magnitudes for ztf filters.
Extrapolated from <a class="reference external" href="http://astroweb.case.edu/ssm/ASTR620/alternateabsmag.html">http://astroweb.case.edu/ssm/ASTR620/alternateabsmag.html</a>
using the effective wavelengths from
<a class="reference external" href="http://svo2.cab.inta-csic.es/svo/theory/fps3/">http://svo2.cab.inta-csic.es/svo/theory/fps3/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ztf_mag_vega</strong> (<em>float</em><em>, </em><em>array</em><em> of </em><em>floats</em>) – ztf photometry of galaxia / SPISEA sources in vega system</p></li>
<li><p><strong>filter_name</strong> (<em>str</em>) – The name of the filter in which to calculate all the
microlensing events. Must be either ‘g’ or ‘r’ or ‘i’.</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>ztf_mag_AB</strong> (<em>float</em><em>, </em><em>array</em><em> of </em><em>floats</em>) – ztf photometry of galaxia / SPISEA sources in AB system</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-popsycle.orbits">
<span id="popsycle-orbits-module"></span><h2>popsycle.orbits module<a class="headerlink" href="#module-popsycle.orbits" title="Link to this heading"></a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="popsycle.orbits.EccAnomalyError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">popsycle.orbits.</span></span><span class="sig-name descname"><span class="pre">EccAnomalyError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.orbits.EccAnomalyError" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="popsycle.orbits.Orbit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">popsycle.orbits.</span></span><span class="sig-name descname"><span class="pre">Orbit</span></span><a class="headerlink" href="#popsycle.orbits.Orbit" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Exerpted from orbits.py from gcworks</p>
<dl class="py method">
<dt class="sig sig-object py" id="popsycle.orbits.Orbit.eccen_anomaly">
<span class="sig-name descname"><span class="pre">eccen_anomaly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ecc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.orbits.Orbit.eccen_anomaly" title="Link to this definition"></a></dt>
<dd><p>Calculates the eccentricity anomaly</p>
<dl class="simple">
<dt>m: numpy array</dt><dd><p>Mean anomalies</p>
</dd>
<dt>ecc: float between 0-1</dt><dd><p>The eccentricity of the orbit</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="popsycle.orbits.Orbit.kep2xyz">
<span class="sig-name descname"><span class="pre">kep2xyz</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">epochs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.orbits.Orbit.kep2xyz" title="Link to this definition"></a></dt>
<dd><p>Generates (r, v, a) in AU, AU/yr, and AU/yr^2 respectively from keplarian parameters.</p>
<dl class="simple">
<dt>epoch: numpy array</dt><dd><p>Array of times (in years) that you would like to compute the parameters for</p>
</dd>
<dt>mass: float or array-like</dt><dd><p>Mass of primary object</p>
</dd>
</dl>
<p>An example call is:</p>
<p>orb = orbits.Orbit()
orb.w = omega # [degrees]
orb.o = bigOm # [degrees]
orb.i = incl # [degrees]
orb.e = e_mag # float between 0 and 1
orb.p = p # [years]
orb.t0 = t0 # [years] This is initial
orb.mass = mass # [Msun]</p>
<p>(r, v, a) = orb.kep2xyz(array([refTime]))</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.orbits.a_to_P">
<span class="sig-prename descclassname"><span class="pre">popsycle.orbits.</span></span><span class="sig-name descname"><span class="pre">a_to_P</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mass</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.orbits.a_to_P" title="Link to this definition"></a></dt>
<dd><p>Goes from semimajor axis in AU to period in years</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mass</strong> (<em>float</em><em> or </em><em>array-like</em>) – Primary object mass in Msun.</p></li>
<li><p><strong>a</strong> (<em>float</em><em> or </em><em>array-like</em>) – Semimajor axis in AU.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>period</strong> – Orbital period in years.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or array-like</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.orbits.add_mult_positions">
<span class="sig-prename descclassname"><span class="pre">popsycle.orbits.</span></span><span class="sig-name descname"><span class="pre">add_mult_positions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">companions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ss_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logAge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_velocities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.orbits.add_mult_positions" title="Link to this definition"></a></dt>
<dd><p>Adds x and y positions of multiple companions by transforming keplerian parameters to xyz in AU
using code origially from gcworks and random initial times. Then adding them to the random posiiton of the primary object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ss_pos</strong> (<em>astropy table</em>) – Star system table with positions added with add_positions()</p></li>
<li><p><strong>companion</strong> (<em>astropy table</em>) – Companion table without positions</p></li>
<li><p><strong>logAge</strong> (<em>float</em><em> or </em><em>int</em>) – Log of age of cluster with age in years</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>companion_temp</strong> – Companion table with positions added</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>astropy table</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.orbits.add_positions">
<span class="sig-prename descclassname"><span class="pre">popsycle.orbits.</span></span><span class="sig-name descname"><span class="pre">add_positions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ss</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.orbits.add_positions" title="Link to this definition"></a></dt>
<dd><p>Adds x and y positions randomly in a box of length and width 40000 AU for each system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ss</strong> (<em>astropy table</em>) – Star system table without positions</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ss_temp</strong> – Star system table with positions added</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>astropy table</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.orbits.distance_to_center_of_mass">
<span class="sig-prename descclassname"><span class="pre">popsycle.orbits.</span></span><span class="sig-name descname"><span class="pre">distance_to_center_of_mass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ss_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companions_pos</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.orbits.distance_to_center_of_mass" title="Link to this definition"></a></dt>
<dd><p>Adds extra column to star system and companions table with x and y distance to the center of mass in AU.
Assumes hierarchical triples (two closest stars orbit their center of mass and triple orbits them) and no quads+.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ss_pos</strong> (<em>astropy table</em>) – Star system table with positions added with add_positions()</p></li>
<li><p><strong>companion_pos</strong> (<em>astropy table</em>) – Companion table with positions added with add_mult_positions()</p></li>
<li><p><strong>Results</strong> – </p></li>
<li><p><strong>----------</strong> – </p></li>
<li><p><strong>ss_pos_temp</strong> (<em>astropy table</em>) – Star system table with distance to center of mass in AU added</p></li>
<li><p><strong>companion_pos_temp</strong> (<em>astropy table</em>) – Companion table with distance to center of mass in AU added</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.orbits.plot_companion_orbit">
<span class="sig-prename descclassname"><span class="pre">popsycle.orbits.</span></span><span class="sig-name descname"><span class="pre">plot_companion_orbit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companions_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logAge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.orbits.plot_companion_orbit" title="Link to this definition"></a></dt>
<dd><p>Plots the orbit of one system assuming the primary object is at (0,0). By default random companion and initial time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ss</strong> (<em>astropy table</em>) – Star system table (does not matter if it has positions or not)</p></li>
<li><p><strong>companion_pos</strong> (<em>astropy table</em>) – Companion table with positions added with add_mult_positions()</p></li>
<li><p><strong>logAge</strong> (<em>float</em><em> or </em><em>int</em>) – Log of age of cluster with age in years</p></li>
<li><p><strong>Parameters</strong> (<em>Optional</em>) – </p></li>
<li><p><strong>----------</strong> – </p></li>
<li><p><strong>t0</strong> (<em>float</em><em> or </em><em>int</em>) – Initial time of creation of the system in years.
Default random.</p></li>
<li><p><strong>system</strong> (<em>int</em>) – Index of desired companion in companion_pos table.
Default random.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.orbits.plot_projected_cluster">
<span class="sig-prename descclassname"><span class="pre">popsycle.orbits.</span></span><span class="sig-name descname"><span class="pre">plot_projected_cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ss_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companions_pos</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.orbits.plot_projected_cluster" title="Link to this definition"></a></dt>
<dd><p>Plots projected cluster with lines between companions and primary stars</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ss_pos</strong> (<em>astropy table</em>) – Star system table with positions added with add_positions()</p></li>
<li><p><strong>companion_pos</strong> (<em>astropy table</em>) – Companion table with positions added with add_mult_positions()</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-popsycle.run">
<span id="popsycle-run-module"></span><h2>popsycle.run module<a class="headerlink" href="#module-popsycle.run" title="Link to this heading"></a></h2>
<p>run.py
Executable to run the PopSyCLE pipeline.</p>
<dl class="py function">
<dt class="sig sig-object py" id="popsycle.run.generate_config_file">
<span class="sig-prename descclassname"><span class="pre">popsycle.run.</span></span><span class="sig-name descname"><span class="pre">generate_config_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.run.generate_config_file" title="Link to this definition"></a></dt>
<dd><p>Save configuration parameters from a dictionary into a yaml file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_filename</strong> (<em>str</em>) – Name of the configuration file</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – Dictionary containing the configuration parameters</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>None</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.run.generate_field_config_file">
<span class="sig-prename descclassname"><span class="pre">popsycle.run.</span></span><span class="sig-name descname"><span class="pre">generate_field_config_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">longitude</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latitude</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'field_config.yaml'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.run.generate_field_config_file" title="Link to this definition"></a></dt>
<dd><p>Save field configuration parameters from a dictionary into a yaml file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>longitude</strong> (<em>float</em>) – Galactic longitude, ranging from -180 degrees to 180 degrees</p></li>
<li><p><strong>latitude</strong> (<em>float</em>) – Galactic latitude, ranging from -90 degrees to 90 degrees</p></li>
<li><p><strong>area</strong> (<em>float</em>) – Area of the sky that will be generated, in square degrees</p></li>
<li><p><strong>Parameters</strong> (<em>Optional</em>) – </p></li>
<li><p><strong>-------------------</strong> – </p></li>
<li><p><strong>config_filename</strong> (<em>str</em>) – Name of the configuration file
Default: field_config.yaml</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>None</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.run.generate_popsycle_config_file">
<span class="sig-prename descclassname"><span class="pre">popsycle.run.</span></span><span class="sig-name descname"><span class="pre">generate_popsycle_config_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radius_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obs_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_obs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">101</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta_frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blend_rad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isochrones_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Users/myself/popsycle_isochrones'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">IFMR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Raithel18'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">galaxia_galaxy_model_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Users/myself/galaxia_galaxy_model_filename'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_edges_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">BH_kick_speed_mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NS_kick_speed_mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photometric_system</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ubv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'R'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">red_law</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Damineli16'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiplicity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'popsycle_config.yaml'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.run.generate_popsycle_config_file" title="Link to this definition"></a></dt>
<dd><p>Save popsycle configuration parameters from a dictionary into a yaml file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>radius_cut</strong> (<em>float</em>) – Initial radius cut, in ARCSECONDS.</p></li>
<li><p><strong>obs_time</strong> (<em>float</em>) – Survey duration, in DAYS.</p></li>
<li><p><strong>n_obs</strong> (<em>int</em>) – Number of observations.</p></li>
<li><p><strong>theta_frac</strong> (<em>float</em>) – Another cut, in multiples of Einstein radii.</p></li>
<li><p><strong>blend_rad</strong> (<em>float</em>) – Stars within this distance of the lens are said to be blended.
Units are in ARCSECONDS.</p></li>
<li><p><strong>isochrones_dir</strong> (<em>str</em>) – Directory for SPISEA isochrones</p></li>
<li><p><strong>IFMR</strong> (<em>string</em>) – The name of the IFMR object from SPISEA. For more information on these objects see ifmr.py
in SPISEA.
‘Raithel18’ = IFMR_Raithel18
‘Spera15’ = IFMR_Spera15
‘SukhboldN20’ = IFMR_N20_Sukhbold</p></li>
<li><p><strong>galaxia_galaxy_model_filename</strong> (<em>str</em>) – Name of the galaxia galaxy model, as outlined at <a class="reference external" href="https://github.com/jluastro/galaxia">https://github.com/jluastro/galaxia</a></p></li>
<li><p><strong>bin_edges_number</strong> (<em>int</em>) – <dl class="simple">
<dt>Number of edges for the bins</dt><dd><p>bins = bin_edges_number - 1</p>
</dd>
<dt>Total number of bins is</dt><dd><p>N_bins = (bin_edges_number - 1)**2</p>
</dd>
<dt>If None (default), then number of bins is</dt><dd><p>bin_edges_number = int(60 * 2 * radius) + 1</p>
</dd>
</dl>
</p></li>
<li><p><strong>BH_kick_speed_mean</strong> (<em>float</em>) – Mean of the birth kick speed of BH (in km/s) maxwellian distrubution.
Defaults to 50 km/s.</p></li>
<li><p><strong>NS_kick_speed_mean</strong> (<em>float</em>) – Mean of the birth kick speed of NS (in km/s) maxwellian distrubution.
Defaults to 400 km/s based on distributions found by
Hobbs et al 2005 ‘A statistical study of 233 pulsar proper motions’.
<a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2005MNRAS.360..974H/abstract">https://ui.adsabs.harvard.edu/abs/2005MNRAS.360..974H/abstract</a></p></li>
<li><p><strong>photometric_system</strong> (<em>str</em>) – The name of the photometric system in which the filter exists.</p></li>
<li><p><strong>filter_name</strong> (<em>str</em>) – The name of the filter in which to calculate all the
microlensing events. The filter name convention is set
in the global filt_dict parameter at the top of this module.</p></li>
<li><p><strong>red_law</strong> (<em>str</em>) – The name of the reddening law to use from SPISEA.</p></li>
<li><p><strong>multiplicity</strong> (<em>str</em>) – If a resovled multiplicity object is specified,
the table will be generated with resolved multiples.
Default is None.</p></li>
<li><p><strong>binning</strong> (<em>bool</em>) – If set to True, bins files as specified by bin_edges_numbers or default.
If set to False, no bins (SET TO FALSE IF DOING FULL SKY DOWNSAMPLED).
Default is True.</p></li>
<li><p><strong>Parameters</strong> (<em>Optional</em>) – </p></li>
<li><p><strong>-------------------</strong> – </p></li>
<li><p><strong>config_filename</strong> (<em>str</em>) – Name of the configuration file
Default: popsycle_config.yaml</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>None</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.run.generate_slurm_config_file">
<span class="sig-prename descclassname"><span class="pre">popsycle.run.</span></span><span class="sig-name descname"><span class="pre">generate_slurm_config_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_python</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'python'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ulens'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'regular'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">512</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cores_per_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">64</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_nodes_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3072</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">512</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walltime_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'12:00:00'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['module</span> <span class="pre">load</span> <span class="pre">cray-hdf5/1.10.5.2',</span> <span class="pre">'export</span> <span class="pre">HDF5_USE_FILE_LOCKING=FALSE']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'slurm_config.yaml'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.run.generate_slurm_config_file" title="Link to this definition"></a></dt>
<dd><p>Save slurm configuration parameters from a dictionary into a yaml file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_python</strong> (<em>str</em>) – Path to the python executable</p></li>
<li><p><strong>account</strong> (<em>str</em>) – Project account name to charge</p></li>
<li><p><strong>queue</strong> (<em>str</em>) – Scheduler queue type</p></li>
<li><p><strong>resource</strong> (<em>str</em>) – Computing resource name</p></li>
<li><p><strong>memory</strong> (<em>int</em>) – Amount of memory allocated for the job, in units of GB</p></li>
<li><p><strong>n_cores_per_node</strong> (<em>int</em>) – Number of cores in each node of the compute resource</p></li>
<li><p><strong>n_nodes_max</strong> (<em>int</em>) – Total number of nodes in the compute resource</p></li>
<li><p><strong>memory_max</strong> (<em>int</em>) – Memory per node in the computer resource, in units of GB</p></li>
<li><p><strong>walltime_max</strong> (<em>int</em>) – Maximum number of hours for single job on the compute resource
Format: hh:mm:ss</p></li>
<li><p><strong>additional_lines</strong> (<em>list</em><em> of </em><em>strings</em>) – Additional lines to be run before executing run.py</p></li>
<li><p><strong>Parameters</strong> (<em>Optional</em>) – </p></li>
<li><p><strong>-------------------</strong> – </p></li>
<li><p><strong>config_filename</strong> (<em>str</em>) – Name of the configuration file
Default: slurm_config.yaml</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>None</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.run.generate_slurm_script">
<span class="sig-prename descclassname"><span class="pre">popsycle.run.</span></span><span class="sig-name descname"><span class="pre">generate_slurm_script</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slurm_config_filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">popsycle_config_filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_run</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longitude</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latitude</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walltime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cores_perform_pop_syn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cores_calc_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cores_refine_binary_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_proc_refine_binary_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">submitFlag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnJobID</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dependencyJobID</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_galaxia</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_perform_pop_syn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_calc_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_refine_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_refine_binary_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.run.generate_slurm_script" title="Link to this definition"></a></dt>
<dd><p>Generates (and possibly submits) the slurm script that
executes the PopSyCLE pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>slurm_config_filename</strong> (<em>str</em>) – Name of slurm_config.yaml file containing the slurm parameters
that will be used the generate the slurm script header.</p></li>
<li><p><strong>popsycle_config_filename</strong> (<em>str</em>) – Name of popsycle_config.yaml file containing the PopSyCLE parameters
that will be passed along to the run_on_slurm.py command in the
slurm script.</p></li>
<li><p><strong>path_run</strong> (<em>str</em>) – Directory containing the parameter file and PopSyCLE output files</p></li>
<li><p><strong>output_root</strong> (<em>str</em>) – <p>Base filename of the output files
Examples:</p>
<blockquote>
<div><p>’{output_root}.h5’
‘{output_root}.ebf’
‘{output_root}_events.h5’</p>
</div></blockquote>
</p></li>
<li><p><strong>longitude</strong> (<em>float</em>) – Galactic longitude, ranging from -180 degrees to 180 degrees</p></li>
<li><p><strong>latitude</strong> (<em>float</em>) – Galactic latitude, ranging from -90 degrees to 90 degrees</p></li>
<li><p><strong>area</strong> (<em>float</em>) – Area of the sky that will be generated, in square degrees</p></li>
<li><p><strong>walltime</strong> (<em>str</em>) – Amount of walltime that the script will request from slurm.
Format: hh:mm:ss</p></li>
<li><p><strong>Parameters</strong> (<em>Optional</em>) – </p></li>
<li><p><strong>-------------------</strong> – </p></li>
<li><p><strong>jobname</strong> (<em>str</em>) – <p>The name of the slurm job and run_popsycle execution file.
If ‘default’, the format will be:</p>
<blockquote>
<div><p>&lt;longitude&gt;_&lt;latitude&gt;_&lt;output_root&gt;</p>
</div></blockquote>
</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – If non-None, all random sampling will be seeded with the
specified seed, forcing identical output for SPISEA and PopSyCLE.
Default None.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – If True, overwrites output files. If False, exists the
function if output files are already on disk.
Default is False.</p></li>
<li><p><strong>submitFlag</strong> (<em>bool</em>) – If True, script will be submitted to the slurm scheduler
after being written to disk. If False, it will not be submitted.
Default is True</p></li>
<li><p><strong>returnJobID</strong> (<em>bool</em>) – If True and submitFlag is True,
function will return the SLURM job id after script submission.
If False or submitFlag is False,
function will return None.
Default is False</p></li>
<li><p><strong>dependencyJobID</strong> (<em>int</em>) – If non-None and submitFlag is True, submitted job will only run
after dependencyJobID is completed with no errors.
Default is None</p></li>
<li><p><strong>n_cores_perform_pop_syn</strong> (<em>int</em>) – Number of cores for executing synthetic.perform_pop_syn
Default is 1.</p></li>
<li><p><strong>n_cores_calc_events</strong> (<em>int</em>) – Number of cores for executing synthetic.calc_events
Default is 1.</p></li>
<li><p><strong>n_cores_refine_binary_events</strong> (<em>int</em>) – Number of cores for executing synthetic.refine_binary_events
Default is 1.</p></li>
<li><p><strong>multi_proc_refine_binary_events</strong> (<em>bool</em>) – Even if n_proc = 1, a pool is still created. If multi_proc = False,
instead there is just a for-loop to generate and analyze the lightcurves.
If multi_proc == False, n_proc must = 1.
Default is True.</p></li>
<li><p><strong>skip_galaxia</strong> (<em>bool</em>) – If True, pipeline will not run Galaxia and assume that the
resulting ebf file is already present.
Default is False</p></li>
<li><p><strong>skip_perform_pop_syn</strong> (<em>bool</em>) – If True, pipeline will not run perform_pop_syn and assume that
the resulting h5 file is already present.
Default is False</p></li>
<li><p><strong>skip_calc_events</strong> (<em>bool</em>) – If True, pipeline will not run calc_events and assume that the
resulting events and blends files are already present.
Default is False</p></li>
<li><p><strong>skip_refine_events</strong> (<em>bool</em>) – If True, pipeline will not run refine_events.
Default is False</p></li>
<li><p><strong>skip_refine_binary_events</strong> (<em>bool</em>) – If True, pipeline will not run refine_binary_events.
If specified multiplicity is None, will be True.
Default is False</p></li>
<li><p><strong>verbose</strong> (<em>int</em>) – Level of debugging information to print to stderr. Set to 0 for minimal
information. Coarse timing at 2 and fine timing at 4.
Default is 0.</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>&lt;output_root&gt;.h5</strong> (<em>hdf5 file</em>) – NOTE: This is what _bin_lb_hdf5 returns.
An hdf5 file with datasets that correspond to the longitude bin edges,
latitude bin edges, and the compact objects
and stars sorted into those bins.</p></li>
<li><p><strong>&lt;path_run&gt;/&lt;output_root&gt;_field_config.yaml</strong> (<em>yaml file</em>) – Field config file containing the galactic parameters needed to run pipeline</p></li>
<li><p><strong>&lt;path_run&gt;/run_popsycle_&lt;jobname&gt;.sh</strong> (<em>yaml file</em>) – SLURM batch script for submitting job with pipeline run</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>None or slurm_jobid</strong> – If submitFlag is True and returnJobID is True,
function returns the SLURM job ID after script submission.
Otherwise, function returns None</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.run.load_config_file">
<span class="sig-prename descclassname"><span class="pre">popsycle.run.</span></span><span class="sig-name descname"><span class="pre">load_config_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.run.load_config_file" title="Link to this definition"></a></dt>
<dd><p>Load configuration parameters from a yaml file into a dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_filename</strong> (<em>str</em>) – Name of the configuration file</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>config</strong> (<em>dict</em>) – Dictionary containing the configuration parameters</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.run.main">
<span class="sig-prename descclassname"><span class="pre">popsycle.run.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.run.main" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.run.run">
<span class="sig-prename descclassname"><span class="pre">popsycle.run.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'root0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_config_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'field_config.yaml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">popsycle_config_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'popsycle_config.yaml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cores_perform_pop_syn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cores_calc_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cores_refine_binary_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_proc_refine_binary_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_galaxia</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_perform_pop_syn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_calc_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_refine_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_refine_binary_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.run.run" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.run.tar_run_results">
<span class="sig-prename descclassname"><span class="pre">popsycle.run.</span></span><span class="sig-name descname"><span class="pre">tar_run_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extension_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['ebf',</span> <span class="pre">'fits',</span> <span class="pre">'h5',</span> <span class="pre">'log',</span> <span class="pre">'out',</span> <span class="pre">'sh',</span> <span class="pre">'txt',</span> <span class="pre">'yaml']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_bin_phot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.run.tar_run_results" title="Link to this definition"></a></dt>
<dd><p>Creates a tarball of all results from executing run.py. This script
assumes that all instances of <cite>generat_slurm_script</cite> were run with
<cite>path_run</cite> set to subfolders to a common folder, and that this
script is being run in that common folder. Failure to do so
will create some funky tarball with files you don’t want in it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>extension_list</strong> (<em>list</em>) – List of extensions to include in tarball.
Defaults to all possible extensions.</p></li>
<li><p><strong>include_bin_phot</strong> (<em>bool</em>) – If True and running with multiplicity, include lightcurves
generated by <cite>refine_binary_events</cite>. Default True.</p></li>
<li><p><strong>output_prefix</strong> (<em>str</em>) – <dl class="simple">
<dt>If not None, add <cite>output_prefix</cite> before name of tarball:</dt><dd><p>{output_prefix}_runs.tar</p>
</dd>
</dl>
</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>&lt;output_prefix&gt;_runs.tar</strong> (<em>tarball file</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-popsycle.synthetic">
<span id="popsycle-synthetic-module"></span><h2>popsycle.synthetic module<a class="headerlink" href="#module-popsycle.synthetic" title="Link to this heading"></a></h2>
<p>synthetic.py
Functions (and their associated functions) for running the PopSyCLE pipeline.
Including:
- write_galaxia_params
- perform_pop_syn
- calc_events
- refine_events
- refine_binary_events</p>
<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.bsbl_model_gen">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">bsbl_model_gen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bsbl_parameter_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.bsbl_model_gen" title="Link to this definition"></a></dt>
<dd><p>Generate bsbl_photastrom_par_param1 model from parameter dict</p>
<section id="parameters">
<h3>Parameters:<a class="headerlink" href="#parameters" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>bspl_parameter_dict<span class="classifier">dict</span></dt><dd><p>Dictionary of the BSBL_PhotAstrom_Par_Param1 parameters</p>
</dd>
</dl>
</section>
<section id="output">
<h3>Output:<a class="headerlink" href="#output" title="Link to this heading"></a></h3>
<p>bsbl model</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.bspl_model_gen">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">bspl_model_gen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bspl_parameter_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.bspl_model_gen" title="Link to this definition"></a></dt>
<dd><p>Generate bspl_photastrom_par_param1 model from parameter dict</p>
<section id="id9">
<h3>Parameters:<a class="headerlink" href="#id9" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>bspl_parameter_dict<span class="classifier">dict</span></dt><dd><p>Dictionary of the BSPL_PhotAstrom_Par_Param1 parameters</p>
</dd>
</dl>
</section>
<section id="id10">
<h3>Output:<a class="headerlink" href="#id10" title="Link to this heading"></a></h3>
<p>bspl model</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_DM">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_DM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">M</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_DM" title="Link to this definition"></a></dt>
<dd><p>Calculate the distance modulus: m = M + 5log10(100*r/kpc)</p>
<section id="id11">
<h3>Parameters:<a class="headerlink" href="#id11" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>M<span class="classifier">float or array</span></dt><dd><p>Absolute magnitude of star</p>
</dd>
<dt>r<span class="classifier">float or array</span></dt><dd><p>Distance of star from sun (in kpc)</p>
</dd>
</dl>
</section>
<section id="id12">
<h3>Output:<a class="headerlink" href="#id12" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>m<span class="classifier">float or array</span></dt><dd><p>Apparent magnitude of star</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_app_mag">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_app_mag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">M</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">E</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_app_mag" title="Link to this definition"></a></dt>
<dd><p>Calculate the apparent magnitude (i.e. distance modulus
plus extinction)</p>
<section id="id13">
<h3>Parameters:<a class="headerlink" href="#id13" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>M<span class="classifier">float or array</span></dt><dd><p>Absolute magnitude of star</p>
</dd>
<dt>r<span class="classifier">float or array</span></dt><dd><p>Distance of star from sun (in kpc)</p>
</dd>
<dt>E<span class="classifier">float or array</span></dt><dd><p>Extinction law</p>
</dd>
<dt>f<span class="classifier">float or array</span></dt><dd><p>Coefficient for that particular band or whatever</p>
</dd>
</dl>
</section>
<section id="id14">
<h3>Output:<a class="headerlink" href="#id14" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>m<span class="classifier">float or array</span></dt><dd><p>Apparent magnitude of star</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_blend_and_centroid">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_blend_and_centroid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">red_law</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blend_tab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photometric_system</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ubv'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_blend_and_centroid" title="Link to this definition"></a></dt>
<dd><p>Given the absolute magnitudes of a bunch of things,
calculate their blended apparent magnitude and flux.
Also calculate the centroid of these things.
Assumes all binaries are blended.</p>
<p>Filter name is ‘j’, ‘i’, etc.
red_law is Damineli16, Schlegel99, etc.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_bump_amp">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_bump_amp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_N</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_bump_amp" title="Link to this definition"></a></dt>
<dd><p>Calculate the “bump” amplitude, given the minimum separation and the fluxes
of the (unmagnified) source, lens, and neighbors.
The bump amplitude (mags) is:
abs(m_peak - m_base) = -2.5 log10 ((A(u0) * f_S + f_L + f_N)/(f_S + f_L + f_N))</p>
<section id="id15">
<h3>Parameters:<a class="headerlink" href="#id15" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>u0<span class="classifier">float or array</span></dt><dd><p>Dimensionless source-lens angular separation, closest approach</p>
</dd>
<dt>f_S<span class="classifier">float or array</span></dt><dd><p>Flux from source (arbitrary units)</p>
</dd>
<dt>f_L<span class="classifier">float or array</span></dt><dd><p>Flux from lens (arbitrary units)</p>
</dd>
<dt>f_N<span class="classifier">float or array</span></dt><dd><p>Flux from neighbors (arbitrary units)</p>
</dd>
</dl>
</section>
<section id="id16">
<h3>Output:<a class="headerlink" href="#id16" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>m_bump<span class="classifier">float or array</span></dt><dd><p>Bump magnitude</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_closest_approach">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_closest_approach</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_tab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">survey_duration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_closest_approach" title="Link to this definition"></a></dt>
<dd><p>Calculate the point of closest approach, during a given interval.
Return the position and time of closest approach.
This algorithm comes from a little writeup called
“Point of Closest Approach for the Linear Motion of Two Particles in 2-D”</p>
<section id="id17">
<h3>Parameters:<a class="headerlink" href="#id17" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>event_tab<span class="classifier">astropy table</span></dt><dd><p>This should take the astropy table that comes from the
output of calc_events.</p>
</dd>
<dt>survey_duration<span class="classifier">int or float</span></dt><dd><p>Survey duration, in days</p>
</dd>
</dl>
</section>
<section id="id18">
<h3>Output:<a class="headerlink" href="#id18" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>u0<span class="classifier">array (same length as event_tab)</span></dt><dd><p>Minimum separation (normalized to Einstein radius)</p>
</dd>
<dt>t0<span class="classifier">array (same length as event_tab)</span></dt><dd><p>Time at minimum separation (days)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_delta_c">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_delta_c</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thetaE</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_delta_c" title="Link to this definition"></a></dt>
<dd><p>Calculate the maximum centroid shift for a dark lens,
no neighbors</p>
<section id="id19">
<h3>Parameters:<a class="headerlink" href="#id19" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>u<span class="classifier">float or array</span></dt><dd><p>Dimensionless lens-source separation, normalized in Einstein radius units.</p>
</dd>
<dt>thetaE<span class="classifier">float</span></dt><dd><p>Einstein radius of lens.</p>
</dd>
</dl>
</section>
<section id="id20">
<h3>Output:<a class="headerlink" href="#id20" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>delta_c<span class="classifier">float or array</span></dt><dd><p>Maximum centroid shift</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_diff_limit_blend">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_diff_limit_blend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_fits_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blend_fits_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blend_rad</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_diff_limit_blend" title="Link to this definition"></a></dt>
<dd><p>Given a table of events and blends, calculate what the blending would be
for a smaller blending radius (e.g. table is for seeing limited,
and you want what the diffraction limit blend is.)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_distance">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_tab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_distance" title="Link to this definition"></a></dt>
<dd><p>Calculate the separation of two different objects at some given time.
With sign convention from Gould 2004:
u0 &gt; 0 then the source is to the east of the lens
u0 &lt; 0 then the source is to the west of the lens</p>
<section id="id21">
<h3>Parameters:<a class="headerlink" href="#id21" title="Link to this heading"></a></h3>
<p>event_tab : astropy table</p>
<p>time : int/float</p>
</section>
<section id="id22">
<h3>Output:<a class="headerlink" href="#id22" title="Link to this heading"></a></h3>
<p>u : array (same length as astropy table)</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_events">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hdf5_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_root2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obs_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_obs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">101</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta_frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blend_rad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.65</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_proc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hdf5_file_comp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_events" title="Link to this definition"></a></dt>
<dd><p>Calculate microlensing events</p>
<section id="id23">
<h3>Parameters:<a class="headerlink" href="#id23" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>hdf5_file<span class="classifier">str</span></dt><dd><p>Name of the HDF5 file.</p>
</dd>
<dt>output_root2<span class="classifier">str</span></dt><dd><p>The name for the h5 file</p>
</dd>
<dt>radius_cut<span class="classifier">float</span></dt><dd><p>Initial radius cut, in ARCSECONDS.</p>
</dd>
<dt>obs_time<span class="classifier">float</span></dt><dd><p>Survey duration, in DAYS.</p>
</dd>
<dt>n_obs<span class="classifier">int</span></dt><dd><p>Number of observations.</p>
</dd>
<dt>theta_frac<span class="classifier">float</span></dt><dd><p>Another cut, in multiples of Einstein radii.</p>
</dd>
<dt>blend_rad<span class="classifier">float</span></dt><dd><p>Stars within this distance of the lens are said to be blended.
Units are in ARCSECONDS.</p>
</dd>
<dt>n_proc<span class="classifier">int, optional</span></dt><dd><p>Number of processors to use. Should not exceed the number of cores.
Default is one processor (no parallelization).</p>
</dd>
<dt>overwrite<span class="classifier">bool, optional</span></dt><dd><p>If set to True, overwrites output files. If set to False, exists the
function if output files are already on disk.
Default is False.</p>
</dd>
<dt>hdf5_file_comp: str</dt><dd><p>String of hdf5 file of companion events created in perform_pop_syn().
Default is None.</p>
</dd>
</dl>
</section>
<section id="id24">
<h3>Output:<a class="headerlink" href="#id24" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>&lt;output_root2&gt;_events.fits<span class="classifier">Astropy .fits table</span></dt><dd><p>Table of candidate microlensing events. The number of rows
corresponds to the number of candidate events.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_ext">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_ext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">E</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_ext" title="Link to this definition"></a></dt>
<dd><p>Calculate the magnitude of extinction.</p>
<section id="id25">
<h3>Parameters:<a class="headerlink" href="#id25" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>E<span class="classifier">float or array</span></dt><dd><p>Extinction law</p>
</dd>
<dt>f<span class="classifier">float or array</span></dt><dd><p>Coefficient for that particular band or whatever</p>
</dd>
</dl>
</section>
<section id="id26">
<h3>Output:<a class="headerlink" href="#id26" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>m_E<span class="classifier">float or array</span></dt><dd><p>Magnitude of extinction</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_magnification">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_magnification</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_magnification" title="Link to this definition"></a></dt>
<dd><p>Calculate the magnification factor A(u)</p>
<section id="id27">
<h3>Parameters:<a class="headerlink" href="#id27" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>u<span class="classifier">float or array</span></dt><dd><p>Dimensionless lens-source separation, normalized in Einstein radius units</p>
</dd>
</dl>
</section>
<section id="id28">
<h3>Output:<a class="headerlink" href="#id28" title="Link to this heading"></a></h3>
<p>Magnification factor : float or array</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calc_sph_motion">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calc_sph_motion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calc_sph_motion" title="Link to this definition"></a></dt>
<dd><p>Calculate velocities in the r directions and proper motions
in l, b directions.</p>
<section id="id29">
<h3>Parameters:<a class="headerlink" href="#id29" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>vx, vy, vz<span class="classifier">float or array</span></dt><dd><p>Heliocentric velocities vx, vy, and vz (in km/s)</p>
</dd>
<dt>r, b, l<span class="classifier">float or array</span></dt><dd><p>Galactic coordinates r, b, and l (in kpc and degrees)</p>
</dd>
</dl>
</section>
<section id="id30">
<h3>Output:<a class="headerlink" href="#id30" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>vr, mu_b, mu_lcosb<span class="classifier">float or array (in km/s and mas/yr)</span></dt><dd><p>Radial velocity and proper motions</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.calculate_binary_angles">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">calculate_binary_angles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">joined_table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.calculate_binary_angles" title="Link to this definition"></a></dt>
<dd><ul class="simple">
<li><dl class="simple">
<dt>Calculates the following angles to the companion array:</dt><dd><ul>
<li><p>alpha: angle between North and binary axis (East of North)</p></li>
<li><p>phi_pi_E: angle between North and proper motion vector (East of North)</p></li>
<li><p>phi: angle between the proper motion and the binary axis</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Each set of angles is for the source if the companion is</p></li>
</ul>
<p>assocaited with the source or the lens if the companion is associated with the lens.
* Binary parameters established in a galactic spherical coordinate systems.
* Big Omega measured from galactic north increasing in the direction of galactic east (positive l).</p>
<section id="id31">
<h3>Parameters:<a class="headerlink" href="#id31" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>joined_table<span class="classifier">pandas table</span></dt><dd><p>Joined companion and event table on obj_id_L and obj_id_S</p>
</dd>
</dl>
</section>
<section id="id32">
<h3>Output:<a class="headerlink" href="#id32" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>alphas<span class="classifier">list</span></dt><dd><p>Angle between North and binary axis (East of North)</p>
</dd>
<dt>phi_pi_Es<span class="classifier">list</span></dt><dd><p>Angle between North and proper motion vector (East of North)</p>
</dd>
<dt>phis<span class="classifier">list</span></dt><dd><p>Angle between the proper motion and the binary axis (phi_pi_E - alpha)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.einstein_radius">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">einstein_radius</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">M</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_S</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.einstein_radius" title="Link to this definition"></a></dt>
<dd><p>Calculates the einstein radius, in mas</p>
<section id="id33">
<h3>Parameters:<a class="headerlink" href="#id33" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>M<span class="classifier">float</span></dt><dd><p>Lens current mass, in solar masses</p>
</dd>
<dt>d_L<span class="classifier">float</span></dt><dd><p>Distance to lens, in kpc</p>
</dd>
<dt>d_S<span class="classifier">float</span></dt><dd><p>Distance to source, in kpc</p>
</dd>
</dl>
</section>
<section id="id34">
<h3>Output:<a class="headerlink" href="#id34" title="Link to this heading"></a></h3>
<blockquote>
<div><p>Einstein radius, in mas</p>
</div></blockquote>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.galactic_to_heliocentric">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">galactic_to_heliocentric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.galactic_to_heliocentric" title="Link to this definition"></a></dt>
<dd><p>Converts from galactic coordinates to heliocentric coordinates.</p>
<section id="id35">
<h3>Parameters:<a class="headerlink" href="#id35" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>r, b, l<span class="classifier">float or array</span></dt><dd><p>Galactic coordinates r, b and l (in kpc and degrees)</p>
</dd>
</dl>
</section>
<section id="id36">
<h3>Output:<a class="headerlink" href="#id36" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>x, y, z<span class="classifier">float or array</span></dt><dd><p>Heliocentric coordinates x, y, and z (in kpc)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.get_Alambda_AKs">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">get_Alambda_AKs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">red_law_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_eff</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.get_Alambda_AKs" title="Link to this definition"></a></dt>
<dd><p>Get Alambda/AKs. NOTE: this doesn’t work for every law in SPISEA!
Naming convention is not consistent. Change SPISEA or add if statements?</p>
<section id="id37">
<h3>Parameters:<a class="headerlink" href="#id37" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>red_law_name<span class="classifier">str</span></dt><dd><p>The name of the reddening law</p>
</dd>
<dt>lambda_eff<span class="classifier">float</span></dt><dd><p>Wavelength in microns</p>
</dd>
</dl>
</section>
<section id="id38">
<h3>Output:<a class="headerlink" href="#id38" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>Alambda_AKs<span class="classifier">float</span></dt><dd><p>Alambda/AKs</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.get_bsbl_lightcurve_parameters">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">get_bsbl_lightcurve_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_idx_L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_idx_S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photometric_system</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">red_law</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.get_bsbl_lightcurve_parameters" title="Link to this definition"></a></dt>
<dd><p>Find the parameters for BSPL_PhotAstrom_Par_Param2 from
event_table and comp_table.</p>
<section id="id39">
<h3>Parameters:<a class="headerlink" href="#id39" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>event_table<span class="classifier">Astropy table</span></dt><dd><p>Table containing the events calculated from refine_events.</p>
</dd>
<dt>comp_table<span class="classifier">Astropy table</span></dt><dd><p>Table containing the companions calculated from refine_events.</p>
</dd>
<dt>comp_idx_L<span class="classifier">int</span></dt><dd><p>Index into the comp_table of the lens companion for which the model is being calculated.</p>
</dd>
<dt>comp_idx_S<span class="classifier">int</span></dt><dd><p>Index into the comp_table of the source companion for which the model is being calculated.</p>
</dd>
<dt>photometric_system<span class="classifier">str</span></dt><dd><p>The name of the photometric system in which the filter exists.</p>
</dd>
<dt>filter_name<span class="classifier">str</span></dt><dd><p>The name of the filter in which to calculate all the
microlensing events. The filter name convention is set
in the global filt_dict parameter at the top of this module.</p>
</dd>
<dt>red_law<span class="classifier">str</span></dt><dd><p>Redenning law</p>
</dd>
<dt>event_id<span class="classifier">float or None, optional</span></dt><dd><p>Corresponding event_id in event_table to companion id.
Default is None.</p>
</dd>
</dl>
</section>
<section id="id40">
<h3>Output:<a class="headerlink" href="#id40" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>bsbl_parameter_dict<span class="classifier">dict</span></dt><dd><p>Dictionary of the BSBL_PhotAstrom_Par_Param2 parameters</p>
</dd>
<dt>obj_id_L<span class="classifier">int</span></dt><dd><p>Object id of the lens associated with event</p>
</dd>
<dt>obj_id_S<span class="classifier">int</span></dt><dd><p>Object id of the source associated with event</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.get_bspl_lightcurve_parameters">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">get_bspl_lightcurve_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photometric_system</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">red_law</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.get_bspl_lightcurve_parameters" title="Link to this definition"></a></dt>
<dd><p>Find the parameters for BSPL_PhotAstrom_Par_Param1 from
event_table and comp_table.</p>
<section id="id41">
<h3>Parameters:<a class="headerlink" href="#id41" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>event_table<span class="classifier">Astropy table</span></dt><dd><p>Table containing the events calculated from refine_events.</p>
</dd>
<dt>comp_table<span class="classifier">Astropy table</span></dt><dd><p>Table containing the companions calculated from refine_events.</p>
</dd>
<dt>comp_idx<span class="classifier">int</span></dt><dd><p>Index into the comp_table of the companion for which the psbl is being calculated.</p>
</dd>
<dt>photometric_system<span class="classifier">str</span></dt><dd><p>The name of the photometric system in which the filter exists.</p>
</dd>
<dt>filter_name<span class="classifier">str</span></dt><dd><p>The name of the filter in which to calculate all the
microlensing events. The filter name convention is set
in the global filt_dict parameter at the top of this module.</p>
</dd>
<dt>red_law<span class="classifier">str</span></dt><dd><p>Redenning law</p>
</dd>
<dt>event_id<span class="classifier">float or None, optional</span></dt><dd><p>Corresponding event_id in event_table to companion id</p>
</dd>
</dl>
</section>
<section id="id42">
<h3>Output:<a class="headerlink" href="#id42" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>bspl_parameter_dict<span class="classifier">dict</span></dt><dd><p>Dictionary of the BSPL_PhotAstrom_Par_Param1 parameters</p>
</dd>
<dt>obj_id_L<span class="classifier">int</span></dt><dd><p>Object id of the lens associated with event</p>
</dd>
<dt>obj_id_S<span class="classifier">int</span></dt><dd><p>Object id of the source associated with event</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.get_psbl_lightcurve_parameters">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">get_psbl_lightcurve_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photometric_system</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.get_psbl_lightcurve_parameters" title="Link to this definition"></a></dt>
<dd><p>Find the parameters for PSBL_PhotAstrom_Par_Param7 from
event_table and comp_table.</p>
<section id="id43">
<h3>Parameters:<a class="headerlink" href="#id43" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>event_table<span class="classifier">Astropy table</span></dt><dd><p>Table containing the events calculated from refine_events.</p>
</dd>
<dt>comp_table<span class="classifier">Astropy table</span></dt><dd><p>Table containing the companions calculated from refine_events.</p>
</dd>
<dt>comp_idx<span class="classifier">int</span></dt><dd><p>Index into the comp_table of the companion for which the psbl is being calculated.</p>
</dd>
<dt>photometric_system<span class="classifier">str</span></dt><dd><p>The name of the photometric system in which the filter exists.</p>
</dd>
<dt>filter_name<span class="classifier">str</span></dt><dd><p>The name of the filter in which to calculate all the
microlensing events. The filter name convention is set
in the global filt_dict parameter at the top of this module.</p>
</dd>
<dt>event_id<span class="classifier">float or None, optional</span></dt><dd><p>Corresponding event_id in event_table to companion id.
Default is None.</p>
</dd>
</dl>
</section>
<section id="id44">
<h3>Output:<a class="headerlink" href="#id44" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>psbl_parameter_dict<span class="classifier">dict</span></dt><dd><p>Dictionary of the PSBL_PhotAstrom_Par_Param7 parameters</p>
</dd>
<dt>obj_id_L<span class="classifier">int</span></dt><dd><p>Object id of the lens associated with event</p>
</dd>
<dt>obj_id_S<span class="classifier">int</span></dt><dd><p>Object id of the source associated with event</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.heliocentric_to_galactic">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">heliocentric_to_galactic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.heliocentric_to_galactic" title="Link to this definition"></a></dt>
<dd><p>Converts from heliocentric coordinates to galactic coordinates.</p>
<section id="id45">
<h3>Parameters:<a class="headerlink" href="#id45" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>x, y, z<span class="classifier">float or array</span></dt><dd><p>Heliocentric coordinates x, y, and z (in kpc)</p>
</dd>
</dl>
</section>
<section id="id46">
<h3>Output:<a class="headerlink" href="#id46" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>r, b, l<span class="classifier">float or array</span></dt><dd><p>Galactic coordinates r, b, and l (in kpc and degrees)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.lightcurve_parameter_gen">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">lightcurve_parameter_gen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_parameter_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_idxs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_id_L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_id_S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_phot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phot_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.lightcurve_parameter_gen" title="Link to this definition"></a></dt>
<dd><p>Find the parameters</p>
<section id="id47">
<h3>Parameters:<a class="headerlink" href="#id47" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>model<span class="classifier">function</span></dt><dd><p>Function associated with generating the microlensing model (must be same as parameter_dict)</p>
</dd>
<dt>model_parameter_dict<span class="classifier">dict</span></dt><dd><p>Dictionary of the bagel model parameters</p>
</dd>
<dt>comp_idx<span class="classifier">list</span></dt><dd><p>List of indices into the comp_table of the companion(s) for which the
binary event is being calculated.</p>
</dd>
<dt>obj_id_L<span class="classifier">int</span></dt><dd><p>Object id of the lens associated with event</p>
</dd>
<dt>obj_id_S<span class="classifier">int</span></dt><dd><p>Object id of the source associated with event</p>
</dd>
<dt>name<span class="classifier">str or None, optional</span></dt><dd><p>Name of fits file to be saved.
Default is None.</p>
</dd>
<dt>save_phot<span class="classifier">bool, optional</span></dt><dd><p>If set to True, saves the photometry generated instead of just parameters.
Default is False.</p>
</dd>
<dt>phot_dir<span class="classifier">str or None, optional</span></dt><dd><p>Name of the directory photometry is saved if save_phot = True.
This parameters is NOT optional if save_phot = True.
Default is None.</p>
</dd>
<dt>overwrite<span class="classifier">bool</span></dt><dd><p>If set to True, overwrites output files. If set to False, exists the
function if output files are already on disk.
Default is False.</p>
</dd>
</dl>
</section>
<section id="id48">
<h3>Output:<a class="headerlink" href="#id48" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>param_dict<span class="classifier">dict</span></dt><dd><p>Dictionary of additional parameters added to companion table
and one called ‘mp_rows’ which are the rows to be added to the multi peak
table.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.make_ebf_log">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">make_ebf_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ebf_table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.make_ebf_log" title="Link to this definition"></a></dt>
<dd><p>Converts log from Galaxia ebf output into dictionary</p>
<section id="id49">
<h3>Parameters:<a class="headerlink" href="#id49" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>ebf_table<span class="classifier">processed ebf file</span></dt><dd><p>The ebf file that galaxia outputs, AFTER it’s been read</p>
</dd>
</dl>
</section>
<section id="id50">
<h3>Output:<a class="headerlink" href="#id50" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>ebf_log<span class="classifier">dictionary</span></dt><dd><p>The ebf file log, in dictionary form</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.make_label_file">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">make_label_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.make_label_file" title="Link to this definition"></a></dt>
<dd><p>Given an output root for an .h5 file, creates a table of
dataset name, l, b, and number of objects.
Writes out the Astropy table as a .fits file.</p>
<section id="id51">
<h3>Parameters:<a class="headerlink" href="#id51" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>h5file_name<span class="classifier">string</span></dt><dd><p>The path and name of the input h5file containing the
population synthesis results. We will read this in and
make a new output file entitled:
&lt;h5file_name&gt;_label.fits (after removing the *.h5).</p>
</dd>
</dl>
</section>
<section id="id52">
<h3>Output:<a class="headerlink" href="#id52" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>label_file<span class="classifier">Astropy table</span></dt><dd><p>Table containing the dataset name, and corresponding l, b, and number of objects.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.make_label_file_no_bins">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">make_label_file_no_bins</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.make_label_file_no_bins" title="Link to this definition"></a></dt>
<dd><p>Given an output root for an .h5 file, creates a table of
dataset name and number of objects.
Writes out the Astropy table as a .fits file.
Used when binning = False (when simulating full sky)</p>
<section id="id53">
<h3>Parameters:<a class="headerlink" href="#id53" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>h5file_name<span class="classifier">string</span></dt><dd><p>The path and name of the input h5file containing the
population synthesis results. We will read this in and
make a new output file entitled:
&lt;h5file_name&gt;_label.fits (after removing the *.h5).</p>
</dd>
</dl>
</section>
<section id="id54">
<h3>Output:<a class="headerlink" href="#id54" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>label_file<span class="classifier">Astropy table</span></dt><dd><p>Table containing the dataset name, and corresponding l, b, and number of objects.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.match_companions">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">match_companions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">star_zams_masses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SPISEA_primary_zams_masses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.match_companions" title="Link to this definition"></a></dt>
<dd><p>Matches galaxia stars and SPISEA stellar primaries by closest match.
Note this is after all SPISEA stars with mass greater than the largest
galaxia mass have been dropped.</p>
<section id="id55">
<h3>Parameters:<a class="headerlink" href="#id55" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>star_zams_masses<span class="classifier">list</span></dt><dd><p>Galaxia star zams mass column form the star_dict.</p>
</dd>
<dt>SPISEA_primary_zams_masses<span class="classifier">object</span></dt><dd><p>Astropy column ‘zams_mass’ from the cluster.star_systems cut down to stellar
primaries with companions less massive than the most massive galaxia star.</p>
</dd>
</dl>
</section>
<section id="id56">
<h3>Output:<a class="headerlink" href="#id56" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>closest_index_arr<span class="classifier">array</span></dt><dd><p>Cloest index in the galaxia mz_galaxia (used to index into mz_galaxia)
with the length of mz_spisea. Note that an index of -1 indicates this star
cannot be matched within 20% of the desired mass.</p>
</dd>
<dt>mass_diff<span class="classifier">array</span></dt><dd><p>The difference between the galaxia star mass and the spisea primary mass
(m_galaxia - m_spisea) for every input spisea star.  Note that a value of np.nan
is used for unmatched stars.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.model_param_dict2fits_header">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">model_param_dict2fits_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_parameter_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phot_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.model_param_dict2fits_header" title="Link to this definition"></a></dt>
<dd><p>If photometry is being saved, saves the parameters
of the model to generate the lightcurve in the first header</p>
<section id="id57">
<h3>Parameters:<a class="headerlink" href="#id57" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>model_parameter_dict<span class="classifier">dictionary</span></dt><dd><p>Dictionary of the bagel model parameters</p>
</dd>
<dt>phot_dir<span class="classifier">str</span></dt><dd><p>Name of the directory photometry</p>
</dd>
<dt>name<span class="classifier">str</span></dt><dd><p>Base name of fits file of photometry without the _phot
(i.e. L_{obj_id_L}_S_{obj_id_S}).</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.one_lightcurve_analysis">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">one_lightcurve_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_table_row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_table_rows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_id_L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_id_S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photometric_system</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">red_law</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_phot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phot_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.one_lightcurve_analysis" title="Link to this definition"></a></dt>
<dd><p>Generate BAGLE model, photometry, and generate binary lightcurve parameters.</p>
<section id="id58">
<h3>Parameters:<a class="headerlink" href="#id58" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>event_table_row<span class="classifier">Astropy table</span></dt><dd><p>Astropy table row from event table with event parameters.</p>
</dd>
<dt>comp_table_rows: Astropy table</dt><dd><p>Astropy table with row(s) associated with event row. I.e. if it’s a binary source,
binary lens, there should be two rows.</p>
</dd>
<dt>obj_id_L<span class="classifier">int</span></dt><dd><p>Object id of the lens associated with event.</p>
</dd>
<dt>obj_id_S<span class="classifier">int</span></dt><dd><p>Object id of the source associated with event.</p>
</dd>
<dt>photometric_system<span class="classifier">str</span></dt><dd><p>Name of the photometric system, i.e. ‘ubv’.</p>
</dd>
<dt>filter_name<span class="classifier">str</span></dt><dd><p>Name of filter associated with photometric system, i.e. ‘I’.</p>
</dd>
<dt>red_law<span class="classifier">str</span></dt><dd><p>Name of reddening law in filt_dict list above, i.e. ‘Damineli16’.</p>
</dd>
<dt>save_phot<span class="classifier">bool, optional</span></dt><dd><p>If set to True, saves the photometry generated instead of just parameters.
Default is False.</p>
</dd>
<dt>phot_dir<span class="classifier">str or None, optional</span></dt><dd><p>Name of the directory photometry is saved if save_phot = True.
This parameters is NOT optional if save_phot = True.
Default is None.</p>
</dd>
<dt>overwrite<span class="classifier">bool, optional</span></dt><dd><p>If set to True, overwrites output files. If set to False, exists the
function if output files are already on disk.
Default is False.</p>
</dd>
</dl>
</section>
<section id="id59">
<h3>Output:<a class="headerlink" href="#id59" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>lightcurve_parameters<span class="classifier">list</span></dt><dd><dl class="simple">
<dt>List of two dictionaries:</dt><dd><ul class="simple">
<li><p>Dictionary of additional parameters added to the event table
and one called ‘mp_rows’ which are the rows to be
added to the multi peak table.</p></li>
<li><p>Dictonary of lightcurve parameters which include both lightcurves
whose parameters are saved in the event table and those that are not.
i.e. in a triple system only the one with the highest delta_m’s p
arameters are used for the lightcurve table. These will all be saved in
a separate lightcurve_table.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.perform_pop_syn">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">perform_pop_syn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ebf_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iso_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">IFMR</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_edges_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">BH_kick_speed_mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NS_kick_speed_mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_photometric_systems</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiplicity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_proc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.perform_pop_syn" title="Link to this definition"></a></dt>
<dd><p>Given some galaxia output, creates compact objects. Sorts the stars and
compact objects into latitude/longitude bins, and saves them in an HDF5 file.</p>
<section id="id60">
<h3>Parameters:<a class="headerlink" href="#id60" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>ebf_file<span class="classifier">str or ebf file</span></dt><dd><p>str : name of the ebf file from Galaxia
ebf file : actually the ebf file from Galaxia</p>
</dd>
<dt>output_root<span class="classifier">str</span></dt><dd><p>The thing you want the output files to be named
Examples include
<code class="docutils literal notranslate"><span class="pre">myout</span></code>,
<code class="docutils literal notranslate"><span class="pre">/some/path/to/myout</span></code>
<code class="docutils literal notranslate"><span class="pre">../back/to/some/path/myout</span></code>.</p>
</dd>
<dt>iso_dir<span class="classifier">filepath</span></dt><dd><p>Where are the isochrones stored (for SPISEA)</p>
</dd>
<dt>IFMR<span class="classifier">string</span></dt><dd><p>The name of the IFMR object from SPISEA. For additional information on these objects see ifmr.py
in SPISEA.
‘Raithel18’ = IFMR_Raithel18
‘Spera15’ = IFMR_Spera15
‘SukhboldN20’ = IFMR_N20_Sukhbold</p>
</dd>
<dt>bin_edges_number<span class="classifier">int, optional</span></dt><dd><p>Number of edges for the bins such that
<code class="docutils literal notranslate"><span class="pre">bins</span> <span class="pre">=</span> <span class="pre">bin_edges_number</span> <span class="pre">-</span> <span class="pre">1</span></code>.
The Total number of bins is
<code class="docutils literal notranslate"><span class="pre">N_bins</span> <span class="pre">=</span> <span class="pre">(bin_edges_number</span> <span class="pre">-</span> <span class="pre">1)**2</span></code>.
If set to None (default), then number of bins is
<code class="docutils literal notranslate"><span class="pre">bin_edges_number</span> <span class="pre">=</span> <span class="pre">int(60</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">radius)</span> <span class="pre">+</span> <span class="pre">1</span></code></p>
</dd>
<dt>BH_kick_speed_mean<span class="classifier">float, optional</span></dt><dd><p>Mean of the birth kick speed of BH (in km/s) maxwellian distrubution.
Defaults to 50 km/s.</p>
</dd>
<dt>NS_kick_speed_mean<span class="classifier">float, optional</span></dt><dd><p>Mean of the birth kick speed of NS (in km/s) maxwellian distrubution.
Defaults to 400 km/s based on distributions found by
Hobbs et al 2005 ‘A statistical study of 233 pulsar proper motions’.
<a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2005MNRAS.360..974H/abstract">https://ui.adsabs.harvard.edu/abs/2005MNRAS.360..974H/abstract</a></p>
</dd>
<dt>additional_photometric_systems<span class="classifier">list of strs, optional</span></dt><dd><p>The name of the photometric systems which should be calculated from
Galaxia / SPISEA’s ubv photometry and appended to the output files.</p>
</dd>
<dt>multiplicity: object</dt><dd><p>If a resovled multiplicity object is specified,
the table will be generated with resolved multiples.
Default is None.</p>
</dd>
<dt>binning<span class="classifier">bool</span></dt><dd><p>If set to True, bins files as specified by bin_edges_numbers or default.
If set to False, no bins (SET TO FALSE IF DOING FULL SKY DOWNSAMPLED).
Default is True.</p>
</dd>
<dt>overwrite<span class="classifier">bool, optional</span></dt><dd><p>If set to True, overwrites output files. If set to False, exits the
function if output files are already on disk.
Default is False.</p>
</dd>
<dt>seed<span class="classifier">int, optional</span></dt><dd><p>If set to non-None, all random sampling will be seeded with the
specified seed, forcing identical output for SPISEA and PopSyCLE.
Default None.</p>
</dd>
<dt>n_proc<span class="classifier">int</span></dt><dd><p>Number of processors to use in the parallel processing. Note that
calculations are memory intensive and n_proc &gt; few should likely not be
used to avoid memory overruns that may result in data corruption.
Default is 1.</p>
</dd>
<dt>verbose<span class="classifier">int</span></dt><dd><p>Level of debugging information to print to stderr. Set to 0 for minimal
information. Coarse timing at 2 and fine timing at 4.
Default is 0.</p>
</dd>
</dl>
</section>
<section id="id61">
<h3>Output:<a class="headerlink" href="#id61" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>&lt;output_root&gt;.h5<span class="classifier">hdf5 file</span></dt><dd><p>NOTE: This is what _bin_lb_hdf5 returns.
A compund type hdf5 file with datasets that correspond to the longitude bin edges,
latitude bin edges, and the compact objects
and stars sorted into those bins.</p>
</dd>
<dt>&lt;output_root&gt;_label.fits<span class="classifier">fits file</span></dt><dd><p>NOTE: This is what make_label_file returns.
A fits file that shows the correspondence between dataset name,
latitude, longitude, and number of objects in that bin.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.psbl_model_gen">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">psbl_model_gen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psbl_parameter_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.psbl_model_gen" title="Link to this definition"></a></dt>
<dd><p>Generate psbl_photastrom_par_param1 model from parameter dict</p>
<section id="id62">
<h3>Parameters:<a class="headerlink" href="#id62" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>psbl_parameter_dict<span class="classifier">dict</span></dt><dd><p>Dictionary of the PSBL_PhotAstrom_Par_Param7 parameters</p>
</dd>
</dl>
</section>
<section id="id63">
<h3>Output:<a class="headerlink" href="#id63" title="Link to this heading"></a></h3>
<p>psbl model</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.reduce_blend_rad">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">reduce_blend_rad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blend_tab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_blend_rad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.reduce_blend_rad" title="Link to this definition"></a></dt>
<dd><p>Creates a new blend table for some blending radius r_new
that is smaller than the original blend radius r_orig,
i.e. r_new &lt; r_orig. Also makes a corresponding log and events.</p>
<section id="id64">
<h3>Parameters:<a class="headerlink" href="#id64" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>blend_tab<span class="classifier">str</span></dt><dd><p>The name of the blend table.</p>
</dd>
<dt>new_blend_rad<span class="classifier">float or int</span></dt><dd><p>The new (smaller) blend radius.
Units are in ARCSECONDS.</p>
</dd>
<dt>output_root<span class="classifier">str</span></dt><dd><p>The name for the new blend table
(and corresponding event table)</p>
</dd>
<dt>input_root<span class="classifier">str, optional</span></dt><dd><p>The input root of the old blend table.
If ‘default’, takes root of blend_tab.</p>
</dd>
<dt>overwrite<span class="classifier">bool, optional</span></dt><dd><p>If set to True, overwrites output files. If set to False, exits the
function if output files are already on disk.
Default is False.</p>
</dd>
</dl>
</section>
<section id="id65">
<h3>Output:<a class="headerlink" href="#id65" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>new_blend<span class="classifier">.fits table</span></dt><dd><p>New table with smaller blend radius.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.refine_binary_events">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">refine_binary_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photometric_system</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">red_law</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Damineli16'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_phot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phot_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_proc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_proc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.refine_binary_events" title="Link to this definition"></a></dt>
<dd><p>Takes the output Astropy table from refine_events
(both primaries and companions) and from that calculates
the binary light curves.</p>
<section id="id66">
<h3>Parameters:<a class="headerlink" href="#id66" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>events<span class="classifier">str</span></dt><dd><p>fits file containing the events calculated from refine_events</p>
</dd>
<dt>companions<span class="classifier">str</span></dt><dd><p>fits file containing the companions calculated from refine_events</p>
</dd>
<dt>photometric_system<span class="classifier">str</span></dt><dd><p>The name of the photometric system in which the filter exists.</p>
</dd>
<dt>filter_name<span class="classifier">str</span></dt><dd><p>The name of the filter in which to calculate all the
microlensing events. The filter name convention is set
in the global filt_dict parameter at the top of this module.</p>
</dd>
<dt>red_law<span class="classifier">str, optional</span></dt><dd><p>Reddening law. Default is Damineli16</p>
</dd>
<dt>overwrite<span class="classifier">bool, optional</span></dt><dd><p>If set to True, overwrites output files. If set to False, exists the
function if output files are already on disk.
Default is False.</p>
</dd>
<dt>output_file<span class="classifier">str, optional</span></dt><dd><p>The name of the final refined_events file.
If set to ‘default’, the format will be:
&lt;input_root&gt;_refined_events_&lt;photometric_system&gt;_&lt;filt&gt;_&lt;red_law&gt;.fits</p>
</dd>
<dt>save_phot<span class="classifier">bool, optional</span></dt><dd><p>If set to True, saves the photometry generated instead of just parameters.
Default is False.</p>
</dd>
<dt>phot_dir<span class="classifier">str or None, optional</span></dt><dd><p>Name of the directory photometry is saved if save_phot = True.
This parameters is NOT optional if save_phot = True.
Default is None.</p>
</dd>
<dt>n_proc<span class="classifier">int, optional</span></dt><dd><p>Number of processors to use. Should not exceed the number of cores.
Default is one processor (no parallelization).</p>
</dd>
<dt>multi_proc<span class="classifier">bool, optional</span></dt><dd><p>Even if n_proc = 1, a pool is still created. If multi_proc = False,
instead there is just a for-loop to generate and analyze the lightcurves.
If multi_proc == False, n_proc must = 1.
Default is True.</p>
</dd>
</dl>
</section>
<section id="id67">
<h3>Output:<a class="headerlink" href="#id67" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>&lt;input_root&gt;_refined_events_&lt;photometric_system&gt;_&lt;filt&gt;_&lt;red_law&gt;_companions_rb.fits<span class="classifier">fits file</span></dt><dd><p>A file that contains all the same objects, only now with lots of extra
columns of data. (rb stands for refine binaries).</p>
</dd>
<dt>&lt;input_root&gt;_refined_events_&lt;photometric_system&gt;_&lt;filt&gt;_&lt;red_law&gt;_companions_rb_mp.fits<span class="classifier">fits file</span></dt><dd><p>A file will be created named that contains the data for each individual
peak for events with multiple peaks.
(mp stands for multiple peaks).</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.refine_events">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">refine_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photometric_system</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">red_law</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hdf5_file_comp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legacy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.refine_events" title="Link to this definition"></a></dt>
<dd><p>Takes the output Astropy table from calc_events, and from that
calculates the time of closest approach. Will also return source-lens
separation at this time.</p>
<section id="id68">
<h3>Parameters:<a class="headerlink" href="#id68" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>input_root<span class="classifier">str</span></dt><dd><p>The root path and name of the *_events.fits and *_blends.fits.
Don’t include those suffixes yet.</p>
</dd>
<dt>filter_name<span class="classifier">str</span></dt><dd><p>The name of the filter in which to calculate all the
microlensing events. The filter name convention is set
in the global filt_dict parameter at the top of this module.</p>
</dd>
<dt>photometric_system<span class="classifier">str</span></dt><dd><p>The name of the photometric system in which the filter exists.</p>
</dd>
<dt>red_law<span class="classifier">str</span></dt><dd><p>The name of the reddening law to use from SPISEA.</p>
</dd>
<dt>overwrite<span class="classifier">bool, optional</span></dt><dd><p>If set to True, overwrites output files. If set to False, exists the
function if output files are already on disk.
Default is False.</p>
</dd>
<dt>output_file<span class="classifier">str, optional</span></dt><dd><p>The name of the final refined_events file.
If set to ‘default’, the format will be:
&lt;input_root&gt;_refined_events_&lt;photometric_system&gt;_&lt;filt&gt;_&lt;red_law&gt;.fits</p>
</dd>
<dt>hdf5_file_comp: str or None, optional</dt><dd><p>String of hdf5 file of companion events created in perform_pop_syn().
Default is None.</p>
</dd>
<dt>legacy<span class="classifier">bool, optional</span></dt><dd><p>For running on files created before ~2020 when the filter system was changed
to uppercase (i.e. from ubv_r to ubv_R) and before seeds were introduced.
Default is False.</p>
</dd>
<dt>seed<span class="classifier">int or None, optional</span></dt><dd><p>If not None, this forces the random orbit time for binaries to be fixed every time.
If seed is added but there are no binaries, the seed will have no consequence.
Default is None.</p>
</dd>
</dl>
</section>
<section id="id69">
<h3>Output:<a class="headerlink" href="#id69" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>&lt;input_root&gt;_refined_events_&lt;photometric_system&gt;_&lt;filt&gt;_&lt;red_law&gt;.fits<span class="classifier">fits file</span></dt><dd><p>A file will be created that contains all the same objects,
only now with lots of extra columns of data.</p>
</dd>
<dt>&lt;input_root&gt;_refined_events_&lt;photometric_system&gt;_&lt;filt&gt;_&lt;red_law&gt;_companions.fits<span class="classifier">fits file</span></dt><dd><p>If hdf5_file_comp is not None then a file will be created that contains the same objects
as a the companion file with extra columns of data.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.run_galaxia">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">run_galaxia</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longitude</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latitude</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">galaxia_galaxy_model_filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photo_sys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UBV'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_color_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'V,B-V'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app_mag_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-1000,</span> <span class="pre">1000]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abs_mag_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-1000,</span> <span class="pre">1000]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-1000,</span> <span class="pre">1000]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geometry_option</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pop_ID</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warp_flare_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.run_galaxia" title="Link to this definition"></a></dt>
<dd><p>Given an object root, sky location and area, creates the parameter
file that Galaxia requires for running and executes Galaxia.
User can also specify a seed for Galaxia to use in its object generation.</p>
<section id="id70">
<h3>Parameters:<a class="headerlink" href="#id70" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>output_root<span class="classifier">str</span></dt><dd><p>The thing you want the output files to be named
Examples include
<code class="docutils literal notranslate"><span class="pre">myout</span></code>,
<code class="docutils literal notranslate"><span class="pre">/some/path/to/myout</span></code>,
<code class="docutils literal notranslate"><span class="pre">../back/to/some/path/myout</span></code>.</p>
</dd>
<dt>longitude<span class="classifier">float</span></dt><dd><p>Galactic longitude, ranging from -180 degrees to 180 degrees</p>
</dd>
<dt>latitude<span class="classifier">float</span></dt><dd><p>Galactic latitude, ranging from -90 degrees to 90 degrees</p>
</dd>
<dt>area<span class="classifier">float</span></dt><dd><p>Area of the sky that will be generated, in square degrees</p>
</dd>
<dt>galaxia_galaxy_model_filename<span class="classifier">str</span></dt><dd><p>Name of the galaxia galaxy model parameter file,
as outlined at <a class="reference external" href="https://github.com/jluastro/galaxia">https://github.com/jluastro/galaxia</a></p>
</dd>
<dt>seed<span class="classifier">int, optional</span></dt><dd><p>Seed Galaxia will use to generate objects. If not set, script will
generate a seed from the current time. Setting this seed guarantees
identical results.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.unique_blends">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">unique_blends</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blend_table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.unique_blends" title="Link to this definition"></a></dt>
<dd><p>Given an blends table, there might be a single lens-source-neighbor triple
multiple times (it might have been observed at different timesteps.)
This function will eliminate duplicates, only keeping an event once. It
is picked to be the first occurence.</p>
<section id="id71">
<h3>Parameters:<a class="headerlink" href="#id71" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>blend_table<span class="classifier">blend array</span></dt><dd><p>A table with all the events. There is 1 column with the unique
source ID, 1 with the unique lens ID lens, 1 with the lens-neighbor
separation, and the remaining columns contain info about the neighbors.</p>
</dd>
</dl>
</section>
<section id="id72">
<h3>Output:<a class="headerlink" href="#id72" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>new_blend_table<span class="classifier">numpy array</span></dt><dd><p>Same as blend_table, but all duplicate events have been trimmed out,
such that each event only is listed once (at the observed time where
the source-lens separation is smallest.)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.unique_events">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">unique_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.unique_events" title="Link to this definition"></a></dt>
<dd><p>Given an event table, there might be a single microlensing event listed
multiple times (it might have been observed at different timesteps, or
the nearest neighbor pair might have been symmetric for source and lens.)
This function will eliminate duplicates, only keeping an event once. It
is picked to be the particular observed event with the smallest source-
lens separation.</p>
<section id="id73">
<h3>Parameters:<a class="headerlink" href="#id73" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>event_table<span class="classifier">numpy array</span></dt><dd><p>A table with all the events. There are equal numbers of columns
containing info about the source and the lens, and four additional
columns with theta_E, u0, mu_rel, and t0. The number of rows
corresponds to the number of events.</p>
</dd>
</dl>
</section>
<section id="id74">
<h3>Output:<a class="headerlink" href="#id74" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>new_event_table<span class="classifier">numpy array</span></dt><dd><p>Same as event_table, but all duplicate events have been trimmed out,
such that each event only is listed once (at the observed time where
the source-lens separation is smallest.)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.synthetic.write_galaxia_params">
<span class="sig-prename descclassname"><span class="pre">popsycle.synthetic.</span></span><span class="sig-name descname"><span class="pre">write_galaxia_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longitude</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latitude</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photo_sys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UBV'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_color_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'V,B-V'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app_mag_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-1000,</span> <span class="pre">1000]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abs_mag_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-1000,</span> <span class="pre">1000]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-1000,</span> <span class="pre">1000]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geometry_option</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pop_ID</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warp_flare_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.synthetic.write_galaxia_params" title="Link to this definition"></a></dt>
<dd><p>Given an object root, sky location and area, creates the parameter
file that Galaxia requires for running. User can also specify a seed for
Galaxia to use in its object generation.</p>
<section id="id75">
<h3>Parameters:<a class="headerlink" href="#id75" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>output_root<span class="classifier">str</span></dt><dd><p>The thing you want the output files to be named
Examples include
<code class="docutils literal notranslate"><span class="pre">myout</span></code>,
<code class="docutils literal notranslate"><span class="pre">/some/path/to/myout</span></code>,
<code class="docutils literal notranslate"><span class="pre">../back/to/some/path/myout</span></code>.</p>
</dd>
<dt>longitude<span class="classifier">float</span></dt><dd><p>Galactic longitude, ranging from -180 degrees to 180 degrees</p>
</dd>
<dt>latitude<span class="classifier">float</span></dt><dd><p>Galactic latitude, ranging from -90 degrees to 90 degrees</p>
</dd>
<dt>area<span class="classifier">float</span></dt><dd><p>Area of the sky that will be generated, in square degrees</p>
</dd>
<dt>seed<span class="classifier">int, optional</span></dt><dd><p>Seed Galaxia will use to generate objects. If not set, script will
generate a seed from the current time. Setting this seed guarantees
identical results.</p>
</dd>
</dl>
</section>
<section id="id76">
<h3>Output:<a class="headerlink" href="#id76" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>&lt;output_root&gt;_galaxia_params.txt<span class="classifier">str</span></dt><dd><p>A text file with the parameters that Galaxia requires to run.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="module-popsycle.utils">
<span id="popsycle-utils-module"></span><h2>popsycle.utils module<a class="headerlink" href="#module-popsycle.utils" title="Link to this heading"></a></h2>
<p>utils.py
Functions (and their associated functions) for utilities.</p>
<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.add_precision64">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">add_precision64</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">power</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.add_precision64" title="Link to this definition"></a></dt>
<dd><p>Need more precision for kdtree to run properly. Convert inputs from
float32 to float64, and add a random perturbation beginning in the
nths decimal place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_array</strong> (<em>float</em><em> or </em><em>array</em><em> (</em><em>float32</em><em>)</em>) – Thing that needs more precision.</p></li>
<li><p><strong>power</strong> (<em>float</em>) – To what place you want the perturbation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>output_array</strong> – Thing that has more precision.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or array (float64)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.calc_centroid_shift">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">calc_centroid_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">glat_S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">glon_S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">glat_N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">glon_N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.calc_centroid_shift" title="Link to this definition"></a></dt>
<dd><p>Calculate the centroid (astrometric) shift
for a luminous lens and neighbors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>glat_x</strong> (<em>float</em><em> or </em><em>array</em>) – Longitude of x (L = lens, S = source, N = neighbor centroid)</p></li>
<li><p><strong>glon_x</strong> (<em>float</em><em> or </em><em>array</em>) – Latitude of x (L = lens, S = source, N = neighbor centroid)</p></li>
<li><p><strong>f_x</strong> (<em>float</em><em> or </em><em>array</em>) – Flux of x (L = lens, S = source, N = all neighbors)</p></li>
<li><p><strong>u</strong> (<em>float</em><em> or </em><em>array</em>) – Dimensionless separation</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>delta_c_obs</strong> – Magnitude of observed astrometric shift, in mas</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.calc_delta_c_LL">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">calc_delta_c_LL</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fratio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thetaE</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.calc_delta_c_LL" title="Link to this definition"></a></dt>
<dd><p>Calculate the maximum-ish centroid shift for a luminous
lens, no neighbors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fratio</strong> (<em>flux ratio</em><em> of </em><em>the lens to source</em><em>, </em><em>i.e. f_L/f_S</em>) – </p></li>
<li><p><strong>u0</strong> (<em>impact parameter</em>) – </p></li>
<li><p><strong>thetaE</strong> (<em>Einstein radius</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.calc_f">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">calc_f</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lambda_eff</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.calc_f" title="Link to this definition"></a></dt>
<dd><p>Calculate that coefficient f that multiples E(B-V) to get the
extinction in magnitudes</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.calc_new_position">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">calc_new_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mu_lcosb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mu_b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.calc_new_position" title="Link to this definition"></a></dt>
<dd><p>Given an initial position and proper motions in l and b,
calculate the new position at some later time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>l0</strong> (<em>float</em><em> or </em><em>array</em>) – Initial longitude, in DEGREES</p></li>
<li><p><strong>b0</strong> (<em>float</em><em> or </em><em>array</em>) – Initial latitude, in DEGREES</p></li>
<li><p><strong>mu_lcosb</strong> (<em>float</em><em> or </em><em>array</em>) – Longitudinal proper motion l * cos(b), in MAS/YEAR</p></li>
<li><p><strong>mu_b</strong> (<em>float</em><em> or </em><em>array</em>) – Latitudinal roper motion, in MAS/YEAR</p></li>
<li><p><strong>t</strong> (<em>float</em><em> or </em><em>array</em>) – Time, in DAYS</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>l</strong> (<em>float or array</em>) – Latitude, in DEGREES</p></li>
<li><p><strong>b</strong> (<em>float or array</em>) – Longitude, in DEGREES</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.calc_normalized_counts">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">calc_normalized_counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.calc_normalized_counts" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mag</strong> (<em>float</em>) – </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>counts</strong> (<em>int</em>)</p></li>
<li><p><em>CHANGE THIS CODE IN THE FUTURE TO TAKE IN DIFFERENT ZERO POINTS! NEEDS ADDITIONAL DOCUMENTATION</em></p></li>
<li><p><em>Right now this is only applicable for OGLE I band</em></p></li>
<li><p><em>See confluence wiki for where these values come from…</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.combine_refined_events">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">combine_refined_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refined_events_filenames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.combine_refined_events" title="Link to this definition"></a></dt>
<dd><p>Creates a combined refined_events out of multiple refined_events files</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>refined_events_filenames</strong> (<em>list</em><em> of </em><em>strs</em>) – Filenames of refined_events tables to be combined</p></li>
<li><p><strong>Parameters</strong> (<em>Optional</em>) – </p></li>
<li><p><strong>-------------------</strong> – </p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – If set to True, overwrites output files. If set to False, exits the
function if output files are already on disk.
Default is False.</p></li>
<li><p><strong>output_file</strong> (<em>str</em>) – <p>The name of the final refined_events file.
If set to ‘default’, the format will be generated from the first
filename in refined_events_filenames following:</p>
<blockquote>
<div><p>combined_refined_events_&lt;photometric_system&gt;_&lt;filt&gt;_&lt;red_law&gt;.fits</p>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.execute">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shell</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.execute" title="Link to this definition"></a></dt>
<dd><p>Executes a command line instruction, captures the stdout and stderr</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – Command line instruction, including any executables and parameters</p></li>
<li><p><strong>Parameters</strong> (<em>Optional</em>) – </p></li>
<li><p><strong>-------------------</strong> – </p></li>
<li><p><strong>shell</strong> (<em>bool</em>) – Determines if the command is run through the shell. Default is False.</p></li>
<li><p><strong>Outputs</strong> – </p></li>
<li><p><strong>-------</strong> – </p></li>
<li><p><strong>stdout</strong> (<em>str</em>) – Contains the standard output of the executed process</p></li>
<li><p><strong>stderr</strong> (<em>str</em>) – Contains the standard error of the executed process</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.generate_isochrones">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">generate_isochrones</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iso_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logAge_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logAge_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.291</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logAge_delta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metallicity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_ztf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.generate_isochrones" title="Link to this definition"></a></dt>
<dd><p>Generates isochrones needed for PopSyCLE simulations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iso_dir</strong> (<em>filepath</em>) – Where are the isochrones stored (for SPISEA)</p></li>
<li><p><strong>logAge_min</strong> (<em>float</em>) – Minimum log10(age) of generated isochrones</p></li>
<li><p><strong>logAge_max</strong> (<em>float</em>) – Maximum log10(age) of generated isochrones</p></li>
<li><p><strong>logAge_delta</strong> (<em>float</em>) – Resolution in log10(age) of generated isochrones</p></li>
<li><p><strong>metallicity</strong> (<em>float</em>) – The metallicity in [M/H]</p></li>
<li><p><strong>Parameters</strong> (<em>Optional</em>) – </p></li>
<li><p><strong>-------------------</strong> – </p></li>
<li><p><strong>include_ztf</strong> (<em>bool</em>) – Determines if ztf filters should be included
in the generated isochrones. Default is True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.get_t_from_u">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">get_t_from_u</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.get_t_from_u" title="Link to this definition"></a></dt>
<dd><p>Given the time and separation at closest approach of lens and source
and the Einstein radius, calculate the time as a function of separation.</p>
<p>NOTE 1: You need to be consistent with your units for t0, tE, and t,
i.e. pick whatever you want (days, years, etc.) but be self consistent.</p>
<p>NOTE 2: There is a positive and negative solution for t.
We return the positive solution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>u0</strong> (<em>float</em><em> or </em><em>array</em>) – Minimum separation of lens and source (normalized to Einstein radius)</p></li>
<li><p><strong>t0</strong> (<em>float</em><em> or </em><em>array</em>) – Time of minimum separation of lens and source</p></li>
<li><p><strong>tE</strong> (<em>float</em><em> or </em><em>array</em>) – Einstein crossing time of microlensing event</p></li>
<li><p><strong>u</strong> (<em>float</em><em> or </em><em>array</em>) – Separation of lens and source (normalized to Einstein radius)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>t</strong> – Time corresponding to the separation u</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.get_u_from_t">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">get_u_from_t</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.get_u_from_t" title="Link to this definition"></a></dt>
<dd><p>Given the time and separation at closest approach of lens and source
and the Einstein radius, calculate the separation as a function of time.</p>
<p>NOTE 1: You need to be consistent with your units for t0, tE, and t,
i.e. pick whatever you want (days, years, etc.) but be self consistent.</p>
<p>NOTE 2: There is a positive and negative solution for u.
We return the positive solution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>u0</strong> (<em>float</em><em> or </em><em>array</em>) – Minimum separation of lens and source (normalized to Einstein radius)</p></li>
<li><p><strong>t0</strong> (<em>float</em><em> or </em><em>array</em>) – Time of minimum separation of lens and source</p></li>
<li><p><strong>tE</strong> (<em>float</em><em> or </em><em>array</em>) – Einstein crossing time of microlensing event</p></li>
<li><p><strong>t</strong> (<em>float</em><em> or </em><em>array</em>) – Time at which you want to calculate the separation</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>u</strong> – Separation of lens and source (normalized to Einstein radius)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.make_symlinks">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">make_symlinks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_root</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.make_symlinks" title="Link to this definition"></a></dt>
<dd><p>Makes symlinks for galaxia_params.txt and
perform_pop_syn.log files which are required for refine_events()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_root</strong> (<em>str</em>) – Input root of galaxia_params.txt and perform_pop_syn.log.
(Assumes they have the same input root).</p></li>
<li><p><strong>output_root</strong> (<em>str</em>) – Output root of galaxia_params.txt and perform_pop_syn.log.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.max_delta_c">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">max_delta_c</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thetaE</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.max_delta_c" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.remove_nan_companions">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">remove_nan_companions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_table_loc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_table_loc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_output_loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp_output_loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rewrite_old_loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.remove_nan_companions" title="Link to this definition"></a></dt>
<dd><p>utility to remove companions that were not assigned a final mass
or other parameters. This functionality will be implemented in
perform_pop_syn, but this modifies those that were run with the
nan companions included.</p>
<p>If a SPISEA zams_mass of a companion is too small,
the isochrone interpolator may not be able to assign a mass
and other parameters so they’ll be nan.
This is especially a problem for old (&gt;~ 9 Gyr) and high
metallicity (Fe/H&gt;0.4) objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_table_loc</strong> (<em>string</em>) – Location of a companion table to modify</p></li>
<li><p><strong>comp_table_loc</strong> (<em>string</em>) – Location of a companion table to modify</p></li>
<li><p><strong>Parameters</strong> (<em>Optional</em>) – </p></li>
<li><p><strong>-------------------</strong> – </p></li>
<li><p><strong>event_output_loc</strong> (<em>string</em><em> or </em><em>None</em>) – String of output location of companion table without nan companions
formated as ‘/path/to/file.fits’.
If none, gets saved in the input location with ‘_no_nan’ suffix
Default is None.</p></li>
<li><p><strong>comp_output_loc</strong> (<em>string</em><em> or </em><em>None</em>) – String of output location of companion table without nan companions
formated as ‘/path/to/file.fits’.
If none, gets saved in the input location with ‘_no_nan’ suffix
Default is None.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – Whether file at output_loc should be overwritten.
Default is False.</p></li>
<li><p><strong>rewrite_old_loc</strong> (<em>string</em><em> or </em><em>None</em>) – String of output location of companion table without nan companions.
If None, does not get saved.
Default is None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.return_nearest_gridpoint">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">return_nearest_gridpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_grid_arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_grid_arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.return_nearest_gridpoint" title="Link to this definition"></a></dt>
<dd><p>Algorithm for finding the nearest grid cell on a 2D array given a
datapoint that falls within the bounds of the 2D array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grid</strong> (<em>2D numpy array</em>) – 2D array with size (len(y_grid_arr), len(x_grid_array))</p></li>
<li><p><strong>x_grid_arr</strong> (<em>numpy array</em>) – 2D grid indices in the x-dimension</p></li>
<li><p><strong>y_grid_arr</strong> (<em>numpy array</em>) – 2D grid indices in the y-dimension</p></li>
<li><p><strong>x_data</strong> (<em>numpy array</em>) – x-coordinate for data that will be located onto the grid</p></li>
<li><p><strong>y_data</strong> (<em>numpy array</em>) – y-coordinate for data that will be located onto the grid</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>gridpoint_arr</strong> (<em>numpy array</em>) – list of nearest cell values on the grid at
the location of (x_data, y_data)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="popsycle.utils.sample_spherical">
<span class="sig-prename descclassname"><span class="pre">popsycle.utils.</span></span><span class="sig-name descname"><span class="pre">sample_spherical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">npoints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#popsycle.utils.sample_spherical" title="Link to this definition"></a></dt>
<dd><p>Randomly sample points on a sphere.
I found this code on stackexchange.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>npoints</strong> (<em>float</em>) – The number of points you want to generate.</p></li>
<li><p><strong>speed</strong> (<em>float</em>) – The radius of the sphere (aka the magnitude of the vectors.)</p></li>
<li><p><strong>dim</strong> (<em>float</em>) – The dimension of the space in which the sphere is embedded
(ndim = 3 samples points on a 2-sphere, aka a “normal” sphere)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>An array of the vectors.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="modules.html" class="btn btn-neutral float-left" title="popsycle" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="popsycle_docs.html" class="btn btn-neutral float-right" title="popsycle_docs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Casey Lam, Jessica Lu, Michael Medford, Natasha Abrams, Sam Rose.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>